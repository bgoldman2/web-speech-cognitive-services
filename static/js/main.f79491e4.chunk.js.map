{"version":3,"sources":["../../../src/SpeechServices/SpeechSDK.js","../../../src/SpeechServices/patchOptions.js","../../../../src/SpeechServices/TextToSpeech/SpeechSynthesisVoice.js","../../../../src/SpeechServices/TextToSpeech/SpeechSynthesisEvent.js","../../../src/SpeechServices/SpeechToText.js","../../../../src/SpeechServices/SpeechToText/createSpeechRecognitionPonyfill.js","../../../../src/SpeechServices/SpeechToText/cognitiveServiceEventResultToWebSpeechRecognitionResultList.js","../../../src/Util/arrayToMap.js","../../../src/Util/createPromiseQueue.js","../../../src/SpeechServices/resolveFunctionOrReturnValue.js","../../../../src/SpeechServices/SpeechToText/SpeechGrammarList.js","../../../src/SpeechServices/TextToSpeech.js","../../../../src/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","../../../../src/SpeechServices/TextToSpeech/AudioContextQueue.js","../../../../src/SpeechServices/TextToSpeech/AudioContextConsumer.js","../../../../src/SpeechServices/TextToSpeech/fetchCustomVoices.js","../../../../src/SpeechServices/TextToSpeech/fetchVoices.js","../../../../src/SpeechServices/TextToSpeech/SpeechSynthesisUtterance.js","../../../../src/SpeechServices/TextToSpeech/fetchSpeechData.js","../../../../src/SpeechServices/TextToSpeech/buildSSML.js","../../../../src/SpeechServices/TextToSpeech/isSSML.js","../../../../src/SpeechServices/TextToSpeech/subscribeEvent.js","../../../src/SpeechServices/fetchAuthorizationToken.js","GitHubForkMe.js","getPonyfillCapabilities.js","Bootstrap/Select.js","data/actions/setEnableTelemetry.js","data/actions/setPonyfillType.js","UI/PonyfillSelector.js","data/actions/setRegion.js","UI/RegionSelector.js","data/actions/convertSpeechServicesSubscriptionKeyToAuthorizationToken.js","data/actions/setOnDemandAuthorizationToken.js","data/actions/setSpeechServicesAuthorizationToken.js","data/actions/setSpeechServicesSubscriptionKey.js","UI/SubscriptionKeyInput.js","data/actions/setSpeechRecognitionEndpointId.js","UI/SpeechRecognitionEndpointIdInput.js","data/actions/setSpeechRecognitionLanguage.js","UI/SpeechRecognitionLanguageSelector.js","data/actions/setSpeechRecognitionTextNormalization.js","UI/SpeechRecognitionTextNormalizationSelector.js","data/actions/abortSpeechRecognition.js","data/actions/startSpeechRecognition.js","data/actions/stopSpeechRecognition.js","data/actions/clearSpeechRecognitionEvent.js","data/actions/setSpeechRecognitionContinuous.js","data/actions/setSpeechRecognitionDelayedStart.js","data/actions/setSpeechRecognitionInterimResults.js","data/actions/setSpeechRecognitionMaxAlternatives.js","data/actions/setSpeechRecognitionPhrases.js","data/actions/setSpeechRecognitionReferenceGrammars.js","UI/SpeechRecognitionCommands.js","Bootstrap/Popover.js","UI/SpeechRecognitionSimpleEvents.js","SpeechRecognitionProvingGround2.js","data/actions/cancelSpeechSynthesis.js","data/actions/clearSpeechSynthesisUtterance.js","data/actions/pauseSpeechSynthesis.js","data/actions/resumeSpeechSynthesis.js","data/actions/speechSynthesisSpeakUtterance.js","UI/MonitoringComponent.js","useInterval.js","UI/SpeechSynthesisSpeakingProperty.js","UI/SpeechSynthesisCommands.js","data/actions/setSpeechSynthesisDeploymentId.js","UI/SpeechSynthesisDeploymentIdInput.js","data/actions/setSpeechSynthesisOutputFormat.js","UI/SpeechSynthesisOutputFormatSelector.js","data/actions/setSpeechSynthesisText.js","data/actions/setSpeechSynthesisVoiceURI.js","UI/SpeechSynthesisTextBox.js","UI/SpeechSynthesisUtteranceEvents.js","UI/SpeechSynthesisUtterances.js","UI/SpeechSynthesisVoiceSelector.js","UI/SpeechSynthesisVoiceURIInput.js","SpeechSynthesisProvingGround.js","data/actions/setNavPane.js","App.js","data/actions/setPonyfill.js","data/actions/addSpeechRecognitionEvent.js","data/actions/setSpeechSynthesisNativeVoices.js","data/actions/addSpeechSynthesisNativeUtterance.js","data/actions/addSpeechSynthesisNativeUtteranceEvent.js","data/reducers/speechSynthesisUtterances.js","data/reducer.js","data/reducers/browserSupportedSpeechRecognition.js","data/reducers/enableTelemetry.js","data/reducers/navPane.js","data/reducers/onDemandAuthorizationToken.js","data/reducers/ponyfill.js","data/reducers/ponyfillType.js","data/reducers/region.js","data/reducers/speechRecognitionContinuous.js","data/reducers/speechRecognitionDelayedStart.js","data/reducers/speechRecognitionEndpointId.js","data/reducers/speechRecognitionEvents.js","data/reducers/speechRecognitionInterimResults.js","data/reducers/speechRecognitionLanguage.js","data/reducers/speechRecognitionMaxAlternatives.js","data/reducers/speechRecognitionPhrases.js","data/reducers/speechRecognitionReferenceGrammars.js","data/reducers/speechRecognitionStarted.js","data/reducers/speechRecognitionTextNormalization.js","data/reducers/speechServicesAuthorizationToken.js","data/reducers/speechServicesSubscriptionKey.js","data/reducers/speechSynthesisDeploymentId.js","data/reducers/speechSynthesisNativeVoices.js","data/reducers/speechSynthesisOutputFormat.js","data/reducers/speechSynthesisText.js","data/reducers/speechSynthesisVoiceURI.js","data/sagas/convertSubscriptionKeyToAuthorizationToken.js","fetchSpeechServicesAuthorizationToken.js","data/sagas/setPonyfill.js","data/actions/setSpeechRecognitionInstance.js","data/utils/createPromiseQueue.js","data/sagas/effects/forever.js","data/sagas/speechRecognitionSetInstance.js","data/sagas/speechRecognitionStart.js","data/sagas/speechSynthesisCancelPauseResume.js","data/sagas/speechSynthesisSetNativeVoices.js","data/sagas/speechSynthesisSpeakUtterance.js","data/sagas/speechSynthesisUtteranceEvent.js","data/saga.js","registerServiceWorker.js","index.js","data/createStore.js","../../src/SpeechServices.js"],"names":["AudioConfig","OutputFormat","ResultReason","SpeechConfig","SpeechRecognizer","authorizationToken","credentials","looseEvent","looseEvents","region","subscriptionKey","otherOptions","console","Error","fetchCredentials","customVoiceHostname","speechRecognitionHostname","speechSynthesisHostname","shouldWarnOnSubscriptionKey","resolvedCredentials","gender","lang","voiceURI","this","createSpeechRecognitionPonyfill","SpeechSDK","serializeRecognitionResult","duration","errorDetails","json","offset","properties","reason","resultId","text","JSON","averageAmplitude","arrayBuffer","array","Int16Array","reduce","call","Math","cognitiveServicesAsyncToPromise","fn","args","Promise","SpeechRecognitionEvent","data","emma","interpretation","resultIndex","results","Event","prepareAudioConfig","audioConfig","originalAttach","boundOriginalAttach","reader","read","chunk","firstChunk","name","buffer","ArrayBuffer","isEnd","timeReceived","Date","pause","muted","unprepare","createSpeechRecognitionPonyfillFromRecognizer","createRecognizer","enableTelemetry","referenceGrammars","textNormalization","SpeechRecognition","window","SpeechGrammarList","type","value","getEventAttributeValue","setEventAttributeValue","err","ErrorEvent","error","message","recognizer","queue","event","audioSourceReady","audioSourceOff","firstAudibleChunk","detachAudioConfigEvent","sessionId","canceled","result","recognized","recognizing","sessionStarted","sessionStopped","speechStartDetected","speechEndDetected","phrases","dynamicGrammar","abort","stop","finalizedResults","Object","errorMessage","finalEvent","stopping","audioStarted","soundStarted","speechStarted","maxAlternatives","recognizable","loop","EventTarget","options","speechRecognitionEndpointId","host","hostname","port","protocol","speechConfig","Infinity","resultList","confidence","transcript","display","itn","lexical","maskedITN","isFinal","RecognizingSpeech","RecognizedSpeech","map","length","Symbol","slice","push","resolve","shiftDeferred","shift","fnOrValue","Array","createSpeechSynthesisPonyfill","EMPTY_ARRAY","audioContext","ponyfill","AudioContext","webkitAudioContext","speechSynthesisDeploymentId","speechSynthesisOutputFormat","speechSynthesis","AudioContextQueue","utterance","SpeechSynthesisUtterance","reject","promise","handleError","errorCode","deploymentId","outputFormat","voices","fetchVoices","SpeechSynthesisEvent","consumer","AudioContextConsumer","start","playingUtterance","dispatchEvent","CustomEvent","state","fetchCustomVoices","fetch","encodeURI","encodeURIComponent","headers","accept","res","models","SpeechSynthesisVoice","x","y","authorization","asyncDecodeAudioData","playDecoded","audioBuffer","source","audioContextClosed","EventAsPromise","sourceEnded","unsubscribe","pitch","rate","voice","volume","stack","_playingSource","DEFAULT_LANGUAGE","DEFAULT_OUTPUT_FORMAT","DEFAULT_VOICE","EMPTY_MP3_BASE64","decode","ssml","search","url","Authorization","method","body","relativePercentage","relative","SPEAK_TAG_PATTERN","XML_PROLOG_PATTERN","target","handler","TOKEN_URL_TEMPLATE","FORK_ME_CSS","css","border","position","right","top","owner","repo","href","rel","alt","className","src","getPonyfillCapabilities","ponyfillType","browser","speechServices","test","bundle","customSpeech","customVoice","dynamicPhrases","inverseTextNormalization","npm","referenceGrammarId","telemetry","Option","disabled","children","onChange","SET_ENABLE_TELEMETRY","SET_PONYFILL_TYPE","PonyfillSelector","useSelector","browserSupportedSpeechRecognition","dispatch","useDispatch","dispatchSetEnableTelemetry","useCallback","payload","setEnableTelemetry","dispatchSetPonyfillType","setPonyfillType","ponyfillCapabilities","Select","classNames","active","onClick","SET_REGION","RegionSelector","dispatchSetRegion","setRegion","CONVERT_SPEECH_SERVICES_SUBSCRIPTION_KEY_TO_AUTHORIZATION_TOKEN","SET_ON_DEMAND_AUTHORIZATION_TOKEN","SET_SPEECH_SERVICES_AUTHORIZATION_TOKEN","setSpeechServicesAuthorizationToken","SET_SPEECH_SERVICES_SUBSCRIPTION_KEY","SubscriptionKeyInput","onDemandAuthorizationToken","speechServicesAuthorizationToken","speechServicesSubscriptionKey","dispatchSetOnDemandAuthorizationToken","onDemand","dispatchClearAuthorizationToken","dispatchConvertSubscriptionKeyToAuthorizationToken","dispatchSetSubscriptionKey","setSpeechServicesSubscriptionKey","Fragment","readOnly","SET_SPEECH_RECOGNITION_ENDPOINT_ID","SpeechRecognitionEndpointIdInput","dispatchSetSpeechRecognitionEndpointId","endpointId","SET_SPEECH_RECOGNITION_LANGUAGE","speechRecognitionLanguage","dispatchSetSpeechRecognitionLanguage","language","SET_SPEECH_RECOGNITION_TEXT_NORMALIZATION","speechRecognitionTextNormalization","handleChange","ABORT_SPEECH_RECOGNITION","START_SPEECH_RECOGNITION","STOP_SPEECH_RECOGNITION","stopSpeechRecognition","CLEAR_SPEECH_RECOGNITION_EVENT","clearSpeechRecognitionEvent","SET_SPEECH_RECOGNITION_CONTINUOUS","setSpeechRecognitionContinuous","continuous","SET_SPEECH_RECOGNITION_DELAYED_START","setSpeechRecognitionDelayedStart","delay","SET_SPEECH_RECOGNITION_INTERIM_RESULTS","setSpeechRecognitionInterimResults","interimResults","SET_SPEECH_RECOGNITION_MAX_ALTERNATIVES","SET_SPEECH_RECOGNITION_PHRASES","SET_SPEECH_RECOGNITION_REFERENCE_GRAMMARS","SpeechRecognitionCommands","speechRecognitionEvents","speechRecognitionContinuous","speechRecognitionDelayedStart","speechRecognitionInterimResults","speechRecognitionMaxAlternatives","speechRecognitionPhrases","speechRecognitionReferenceGrammars","speechRecognitionStarted","delayedStart","empty","started","dispatchAbortSpeechRecognition","dispatchClearSpeechRecognitionEvent","dispatchSetSpeechRecognitionContinuous","dispatchSetSpeechRecognitionDelayedStart","dispatchSetSpeechRecognitionHideInterimResults","dispatchSetSpeechRecognitionInteractive","dispatchSetSpeechRecognitionMaxAlternatives","setSpeechRecognitionMaxAlternatives","dispatchSetSpeechRecognitionNoDelayedStart","dispatchSetSpeechRecognitionPhrases","setSpeechRecognitionPhrases","dispatchSetSpeechRecognitionReferenceGrammars","setSpeechRecognitionReferenceGrammars","dispatchSetSpeechRecognitionShowInterimResults","dispatchStartSpeechRecognition","dispatchStopSpeechRecognition","useState","phrasesString","setPhrasesString","referenceGrammarsString","setReferenceGrammarsString","useMemo","join","style","marginBottom","SpeechRecognitionLanguageSelector","SpeechRecognitionTextNormalizationSelector","onBlur","split","trim","filter","ROOT_CSS","backgroundColor","padding","Popover","content","placement","trigger","createContentElement","element","document","createElement","innerText","ref","useRef","current","useEffect","jQuery","popover","html","SpeechRecognitionSimpleEvents","index","stringify","round","CANCEL_SPEECH_SYNTHESIS","CLEAR_SPEECH_SYNTHESIS_UTTERANCE","PAUSE_SPEECH_SYNTHESIS","RESUME_SPEECH_SYNTHESIS","SPEECH_SYNTHESIS_SPEAK_UTTERANCE","MonitoringComponent","getValue","interval","setResult","deps","timer","setInterval","clearInterval","useInterval","nextResult","MonitoredSpeakingProperty","speaking","SpeechSynthesisCommands","speechSynthesisUtterances","speechSynthesisText","speechSynthesisVoiceURI","hasUtterances","dispatchCancelSpeechSynthesis","dispatchClearSpeechSynthesisUtterance","dispatchPauseSpeechSynthesisUtterance","dispatchResumeSpeechSynthesisUtterance","dispatchSpeechSynthesisSpeakUtterance","role","SpeechSynthesisSpeakingProperty","SET_SPEECH_SYNTHESIS_DEPLOYMENT_ID","SpeechSynthesisDeploymentIdInput","dispatchSetSpeechSynthesisDeploymentId","SET_SPEECH_SYNTHESIS_OUTPUT_FORMAT","SpeechSynthesisOutputFormatSelector","dispatchSetSpeechSynthesisOutputFormat","SET_SPEECH_SYNTHESIS_TEXT","SET_SPEECH_SYNTHESIS_VOICE_URI","setSpeechSynthesisVoiceURI","SpeechSynthesisTextBox","speechSynthesisNativeVoices","dispatchSetSpeechSynthesisText","dispatchSetSpeechSynthesisVoice","patterns","some","pattern","find","indexOf","handleCantoneseClick","handleEnglishClick","handleEnglishSSMLClick","handleTextChange","SpeechSynthesisUtteranceEvent","utteranceID","events","id","SpeechSynthesisUtterances","SpeechSynthesisUtteranceEvents","SpeechSynthesisVoiceSelector","dispatchSetSpeechSynthesisVoiceURI","SpeechSynthesisVoiceURIInput","dispatchSetSpeechSynthesisvoiceURI","SpeechSynthesisProvingGround","hasVoices","SET_NAV_PANE","setNavPane","navPane","global","App","dispatchSetNavPaneToSpeechRecognition","preventDefault","dispatchSetNavPaneToSpeechSynthesis","GitHubForkMe","SET_PONYFILL","setPonyfill","ADD_SPEECH_RECOGNITION_EVENT","serializeEvent","from","to","keys","forEach","key","addSpeechRecognitionEvent","serializedEvent","serializedResults","serializedResult","SET_SPEECH_SYNTHESIS_NATIVE_VOICES","ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE","addSpeechSynthesisNativeUtterance","nativeUtterance","ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE_EVENT","addSpeechSynthesisNativeUtteranceEvent","charIndex","elapsedTime","combineReducers","webkitSpeechRecognition","updateIn","convertSubscriptionKeyToAuthorizationTokenSaga","takeLatest","select","fetchSpeechServicesAuthorizationToken","put","a","tokenURL","ok","status","setPonyfillSaga","setPonyfillRootSaga","webkitSpeechGrammarList","createPonyfill","WebSpeechCognitiveServices","create","createSpeechServicesPonyfill","log","SET_SPEECH_RECOGNITION_INSTANCE","setSpeechRecognitionInstance","speechRecognition","createDeferred","forever","speechRecognitionSetInstanceSaga","MONITORING_EVENTS","createPromiseQueue","fork","addEventListener","removeEventListener","startSpeechRecognition","speechRecognitionStartSaga","sleep","setTimeout","getCancelReason","grammars","cancelReason","take","task","race","taskCompleted","cancel","speechSynthesisCancelPauseResumeSaga","takeEvery","resume","speechSynthesisSetNativeVoicesSaga","getVoices","speechSynthesisSpeakUtteranceSaga","random","toString","substr","nativeVoice","speak","speechSynthesisUtteranceEventSaga","clear","saga","convertSubscriptionKeyToAuthorizationToken","speechRecognitionSetInstance","speechRecognitionStart","speechSynthesisCancelPauseResume","speechSynthesisSetNativeVoices","speechSynthesisSpeakUtterance","speechSynthesisUtteranceEvent","isLocalhost","Boolean","location","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","store","initialState","onErrorResumeNext","parse","sessionStorage","getItem","urlSearchParams","URLSearchParams","speechServicesSubscriptionKeyFromURL","get","regionFromURL","loadState","sagaMiddleware","createSagaMiddleware","createStore","reducer","applyMiddleware","run","subscribe","getState","serializableState","setItem","ReactDOM","render","getElementById","URL","process","origin","response","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","meta"],"mappings":"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","file":"static/js/main.f79491e4.chunk.js","sourcesContent":["// We are only importing what we need.\n\nimport {\n  AudioConfig,\n  OutputFormat,\n  ResultReason,\n  SpeechConfig,\n  SpeechRecognizer\n} from 'microsoft-cognitiveservices-speech-sdk/distrib/lib/microsoft.cognitiveservices.speech.sdk';\n\nexport default {\n  AudioConfig,\n  OutputFormat,\n  ResultReason,\n  SpeechConfig,\n  SpeechRecognizer\n};\n","import resolveFunctionOrReturnValue from './resolveFunctionOrReturnValue';\n\nlet shouldWarnOnSubscriptionKey = true;\n\nexport default function patchOptions({\n  authorizationToken,\n  credentials,\n  looseEvent,\n  looseEvents,\n  region = 'westus',\n  subscriptionKey,\n  ...otherOptions\n} = {}) {\n  if (typeof looseEvent !== 'undefined') {\n    console.warn('web-speech-cognitive-services: The option \"looseEvent\" should be named as \"looseEvents\".');\n\n    looseEvents = looseEvent;\n  }\n\n  if (!credentials) {\n    if (!authorizationToken && !subscriptionKey) {\n      throw new Error('web-speech-cognitive-services: Credentials must be specified.');\n    } else {\n      console.warn(\n        'web-speech-cognitive-services: We are deprecating authorizationToken, region, and subscriptionKey. Please use credentials instead. The deprecated option will be removed on or after 2020-11-14.'\n      );\n\n      credentials = async () =>\n        authorizationToken\n          ? { authorizationToken: await resolveFunctionOrReturnValue(authorizationToken), region }\n          : { region, subscriptionKey: await resolveFunctionOrReturnValue(subscriptionKey) };\n    }\n  }\n\n  return {\n    ...otherOptions,\n    fetchCredentials: async () => {\n      const {\n        authorizationToken,\n        customVoiceHostname,\n        region,\n        speechRecognitionHostname,\n        speechSynthesisHostname,\n        subscriptionKey\n      } = await resolveFunctionOrReturnValue(credentials);\n\n      if ((!authorizationToken && !subscriptionKey) || (authorizationToken && subscriptionKey)) {\n        throw new Error(\n          'web-speech-cognitive-services: Either \"authorizationToken\" or \"subscriptionKey\" must be provided.'\n        );\n      } else if (!region && !(speechRecognitionHostname && speechSynthesisHostname)) {\n        throw new Error(\n          'web-speech-cognitive-services: Either \"region\" or \"speechRecognitionHostname\" and \"speechSynthesisHostname\" must be set.'\n        );\n      } else if (region && (customVoiceHostname || speechRecognitionHostname || speechSynthesisHostname)) {\n        throw new Error(\n          'web-speech-cognitive-services: Only either \"region\" or \"customVoiceHostname\", \"speechRecognitionHostname\" and \"speechSynthesisHostname\" can be set.'\n        );\n      } else if (authorizationToken) {\n        if (typeof authorizationToken !== 'string') {\n          throw new Error('web-speech-cognitive-services: \"authorizationToken\" must be a string.');\n        }\n      } else if (typeof subscriptionKey !== 'string') {\n        throw new Error('web-speech-cognitive-services: \"subscriptionKey\" must be a string.');\n      }\n\n      if (shouldWarnOnSubscriptionKey && subscriptionKey) {\n        console.warn(\n          'web-speech-cognitive-services: In production environment, subscription key should not be used, authorization token should be used instead.'\n        );\n\n        shouldWarnOnSubscriptionKey = false;\n      }\n\n      const resolvedCredentials = authorizationToken ? { authorizationToken } : { subscriptionKey };\n\n      if (region) {\n        resolvedCredentials.region = region;\n      } else {\n        resolvedCredentials.customVoiceHostname = customVoiceHostname;\n        resolvedCredentials.speechRecognitionHostname = speechRecognitionHostname;\n        resolvedCredentials.speechSynthesisHostname = speechSynthesisHostname;\n      }\n\n      return resolvedCredentials;\n    },\n    looseEvents\n  };\n}\n","export default class {\n  constructor({ gender, lang, voiceURI }) {\n    this._default = false;\n    this._gender = gender;\n    this._lang = lang;\n    this._localService = false;\n    this._name = voiceURI;\n    this._voiceURI = voiceURI;\n  }\n\n  get default() {\n    return this._default;\n  }\n\n  get gender() {\n    return this._gender;\n  }\n\n  get lang() {\n    return this._lang;\n  }\n\n  get localService() {\n    return this._localService;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  get voiceURI() {\n    return this._voiceURI;\n  }\n}\n","export default class SpeechSynthesisEvent {\n  constructor(type) {\n    this.type = type;\n  }\n}\n","import createSpeechRecognitionPonyfill, {\n  createSpeechRecognitionPonyfillFromRecognizer\n} from './SpeechToText/createSpeechRecognitionPonyfill';\n\nexport default createSpeechRecognitionPonyfill;\n\nexport { createSpeechRecognitionPonyfillFromRecognizer };\n","/* eslint class-methods-use-this: \"off\" */\n/* eslint complexity: [\"error\", 70] */\n/* eslint no-await-in-loop: \"off\" */\n/* eslint no-empty-function: \"off\" */\n/* eslint no-magic-numbers: [\"error\", { \"ignore\": [0, 100, 150] }] */\n\nimport { Event, EventTarget, getEventAttributeValue, setEventAttributeValue } from 'event-target-shim/es5';\n\nimport cognitiveServiceEventResultToWebSpeechRecognitionResultList from './cognitiveServiceEventResultToWebSpeechRecognitionResultList';\nimport createPromiseQueue from '../../Util/createPromiseQueue';\nimport patchOptions from '../patchOptions';\nimport SpeechGrammarList from './SpeechGrammarList';\nimport SpeechSDK from '../SpeechSDK';\n\n// https://docs.microsoft.com/en-us/javascript/api/microsoft-cognitiveservices-speech-sdk/speechconfig?view=azure-node-latest#outputformat\n// {\n//   \"RecognitionStatus\": \"Success\",\n//   \"Offset\": 900000,\n//   \"Duration\": 49000000,\n//   \"NBest\": [\n//     {\n//       \"Confidence\": 0.738919,\n//       \"Lexical\": \"second\",\n//       \"ITN\": \"second\",\n//       \"MaskedITN\": \"second\",\n//       \"Display\": \"Second.\"\n//     }\n//   ]\n// }\n\n// {\n//   \"RecognitionStatus\": \"InitialSilenceTimeout\",\n//   \"Offset\": 50000000,\n//   \"Duration\": 0\n// }\n\nconst { AudioConfig, OutputFormat, ResultReason, SpeechConfig, SpeechRecognizer } = SpeechSDK;\n\nfunction serializeRecognitionResult({ duration, errorDetails, json, offset, properties, reason, resultId, text }) {\n  return {\n    duration,\n    errorDetails,\n    json: JSON.parse(json),\n    offset,\n    properties,\n    reason,\n    resultId,\n    text\n  };\n}\n\nfunction averageAmplitude(arrayBuffer) {\n  const array = new Int16Array(arrayBuffer);\n\n  return (\n    [].reduce.call(array, (averageAmplitude, amplitude) => averageAmplitude + Math.abs(amplitude), 0) / array.length\n  );\n}\n\nfunction cognitiveServicesAsyncToPromise(fn) {\n  return (...args) => new Promise((resolve, reject) => fn(...args, resolve, reject));\n}\n\nclass SpeechRecognitionEvent extends Event {\n  constructor(type, { data, emma, interpretation, resultIndex, results } = {}) {\n    super(type);\n\n    this.data = data;\n    this.emma = emma;\n    this.interpretation = interpretation;\n    this.resultIndex = resultIndex;\n    this.results = results;\n  }\n}\n\nfunction prepareAudioConfig(audioConfig) {\n  const originalAttach = audioConfig.attach;\n  const boundOriginalAttach = audioConfig.attach.bind(audioConfig);\n  let firstChunk;\n  let muted;\n\n  // We modify \"attach\" function and detect when audible chunk is read.\n  // We will only modify \"attach\" function once.\n  audioConfig.attach = async () => {\n    const reader = await boundOriginalAttach();\n\n    return {\n      ...reader,\n      read: async () => {\n        const chunk = await reader.read();\n\n        // The magic number 150 is measured by:\n        // 1. Set microphone volume to 0\n        // 2. Observe the amplitude (100-110) for the first few chunks\n        //    (There is a short static caught when turning on the microphone)\n        // 3. Set the number a bit higher than the observation\n\n        if (!firstChunk && averageAmplitude(chunk.buffer) > 150) {\n          audioConfig.events.onEvent({ name: 'FirstAudibleChunk' });\n          firstChunk = true;\n        }\n\n        if (muted) {\n          return { buffer: new ArrayBuffer(0), isEnd: true, timeReceived: Date.now() };\n        }\n\n        return chunk;\n      }\n    };\n  };\n\n  return {\n    audioConfig,\n    pause: () => {\n      muted = true;\n    },\n    unprepare: () => {\n      audioConfig.attach = originalAttach;\n    }\n  };\n}\n\nexport function createSpeechRecognitionPonyfillFromRecognizer({\n  createRecognizer,\n  enableTelemetry,\n  looseEvents,\n  referenceGrammars,\n  textNormalization\n}) {\n  // If enableTelemetry is set to null or non-boolean, we will default to true.\n  SpeechRecognizer.enableTelemetry(enableTelemetry !== false);\n\n  class SpeechRecognition extends EventTarget {\n    constructor() {\n      super();\n\n      this._continuous = false;\n      this._interimResults = false;\n      this._lang =\n        typeof window !== 'undefined'\n          ? window.document.documentElement.getAttribute('lang') || window.navigator.language\n          : 'en-US';\n      this._grammars = new SpeechGrammarList();\n      this._maxAlternatives = 1;\n    }\n\n    emitCognitiveServices(type, event) {\n      this.dispatchEvent(\n        new SpeechRecognitionEvent('cognitiveservices', {\n          data: {\n            ...event,\n            type\n          }\n        })\n      );\n    }\n\n    get continuous() {\n      return this._continuous;\n    }\n\n    set continuous(value) {\n      this._continuous = value;\n    }\n\n    get grammars() {\n      return this._grammars;\n    }\n\n    set grammars(value) {\n      if (value instanceof SpeechGrammarList) {\n        this._grammars = value;\n      } else {\n        throw new Error(`The provided value is not of type 'SpeechGrammarList'`);\n      }\n    }\n\n    get interimResults() {\n      return this._interimResults;\n    }\n\n    set interimResults(value) {\n      this._interimResults = value;\n    }\n\n    get maxAlternatives() {\n      return this._maxAlternatives;\n    }\n\n    set maxAlternatives(value) {\n      this._maxAlternatives = value;\n    }\n\n    get lang() {\n      return this._lang;\n    }\n\n    set lang(value) {\n      this._lang = value;\n    }\n\n    get onaudioend() {\n      return getEventAttributeValue(this, 'audioend');\n    }\n\n    set onaudioend(value) {\n      setEventAttributeValue(this, 'audioend', value);\n    }\n\n    get onaudiostart() {\n      return getEventAttributeValue(this, 'audiostart');\n    }\n\n    set onaudiostart(value) {\n      setEventAttributeValue(this, 'audiostart', value);\n    }\n\n    get oncognitiveservices() {\n      return getEventAttributeValue(this, 'cognitiveservices');\n    }\n\n    set oncognitiveservices(value) {\n      setEventAttributeValue(this, 'cognitiveservices', value);\n    }\n\n    get onend() {\n      return getEventAttributeValue(this, 'end');\n    }\n\n    set onend(value) {\n      setEventAttributeValue(this, 'end', value);\n    }\n\n    get onerror() {\n      return getEventAttributeValue(this, 'error');\n    }\n\n    set onerror(value) {\n      setEventAttributeValue(this, 'error', value);\n    }\n\n    get onresult() {\n      return getEventAttributeValue(this, 'result');\n    }\n\n    set onresult(value) {\n      setEventAttributeValue(this, 'result', value);\n    }\n\n    get onsoundend() {\n      return getEventAttributeValue(this, 'soundend');\n    }\n\n    set onsoundend(value) {\n      setEventAttributeValue(this, 'soundend', value);\n    }\n\n    get onsoundstart() {\n      return getEventAttributeValue(this, 'soundstart');\n    }\n\n    set onsoundstart(value) {\n      setEventAttributeValue(this, 'soundstart', value);\n    }\n\n    get onspeechend() {\n      return getEventAttributeValue(this, 'speechend');\n    }\n\n    set onspeechend(value) {\n      setEventAttributeValue(this, 'speechend', value);\n    }\n\n    get onspeechstart() {\n      return getEventAttributeValue(this, 'speechstart');\n    }\n\n    set onspeechstart(value) {\n      setEventAttributeValue(this, 'speechstart', value);\n    }\n\n    get onstart() {\n      return getEventAttributeValue(this, 'start');\n    }\n\n    set onstart(value) {\n      setEventAttributeValue(this, 'start', value);\n    }\n\n    start() {\n      this._startOnce().catch(err => {\n        this.dispatchEvent(new ErrorEvent('error', { error: err, message: err && (err.stack || err.message) }));\n      });\n    }\n\n    async _startOnce() {\n      // TODO: [P2] Should check if recognition is active, we should not start recognition twice\n      const recognizer = await createRecognizer(this.lang);\n\n      const { pause, unprepare } = prepareAudioConfig(recognizer.audioConfig);\n\n      try {\n        const queue = createPromiseQueue();\n        let soundStarted;\n        let speechStarted;\n        let stopping;\n\n        const { detach: detachAudioConfigEvent } = recognizer.audioConfig.events.attach(event => {\n          const { name } = event;\n\n          if (name === 'AudioSourceReadyEvent') {\n            queue.push({ audioSourceReady: {} });\n          } else if (name === 'AudioSourceOffEvent') {\n            queue.push({ audioSourceOff: {} });\n          } else if (name === 'FirstAudibleChunk') {\n            queue.push({ firstAudibleChunk: {} });\n          }\n        });\n\n        recognizer.canceled = (_, { errorDetails, offset, reason, sessionId }) => {\n          queue.push({\n            canceled: {\n              errorDetails,\n              offset,\n              reason,\n              sessionId\n            }\n          });\n        };\n\n        recognizer.recognized = (_, { offset, result, sessionId }) => {\n          queue.push({\n            recognized: {\n              offset,\n              result: serializeRecognitionResult(result),\n              sessionId\n            }\n          });\n        };\n\n        recognizer.recognizing = (_, { offset, result, sessionId }) => {\n          queue.push({\n            recognizing: {\n              offset,\n              result: serializeRecognitionResult(result),\n              sessionId\n            }\n          });\n        };\n\n        recognizer.sessionStarted = (_, { sessionId }) => {\n          queue.push({ sessionStarted: { sessionId } });\n        };\n\n        recognizer.sessionStopped = (_, { sessionId }) => {\n          // \"sessionStopped\" is never fired, probably because we are using startContinuousRecognitionAsync instead of recognizeOnceAsync.\n          queue.push({ sessionStopped: { sessionId } });\n        };\n\n        recognizer.speechStartDetected = (_, { offset, sessionId }) => {\n          queue.push({ speechStartDetected: { offset, sessionId } });\n        };\n\n        recognizer.speechEndDetected = (_, { sessionId }) => {\n          // \"speechEndDetected\" is never fired, probably because we are using startContinuousRecognitionAsync instead of recognizeOnceAsync.\n          // Update: \"speechEndDetected\" is fired for DLSpeech.listenOnceAsync()\n          queue.push({ speechEndDetected: { sessionId } });\n        };\n\n        const { phrases } = this.grammars;\n\n        // HACK: We are using the internal of SpeechRecognizer because they did not expose it\n        const { dynamicGrammar } = recognizer.privReco;\n\n        referenceGrammars && referenceGrammars.length && dynamicGrammar.addReferenceGrammar(referenceGrammars);\n        phrases && phrases.length && dynamicGrammar.addPhrase(phrases);\n\n        await cognitiveServicesAsyncToPromise(recognizer.startContinuousRecognitionAsync.bind(recognizer))();\n\n        if (recognizer.stopContinuousRecognitionAsync) {\n          this.abort = () => queue.push({ abort: {} });\n          this.stop = () => queue.push({ stop: {} });\n        } else {\n          this.abort = this.stop = undefined;\n        }\n\n        let audioStarted;\n        let finalEvent;\n        let finalizedResults = [];\n\n        for (let loop = 0; !stopping || audioStarted; loop++) {\n          const event = await queue.shift();\n          const {\n            abort,\n            audioSourceOff,\n            audioSourceReady,\n            canceled,\n            firstAudibleChunk,\n            recognized,\n            recognizing,\n            stop\n          } = event;\n\n          // We are emitting event \"cognitiveservices\" for debugging purpose.\n          Object.keys(event).forEach(name => this.emitCognitiveServices(name, event[name]));\n\n          const errorMessage = canceled && canceled.errorDetails;\n\n          if (/Permission\\sdenied/u.test(errorMessage || '')) {\n            // If microphone is not allowed, we should not emit \"start\" event.\n\n            finalEvent = {\n              error: 'not-allowed',\n              type: 'error'\n            };\n\n            break;\n          }\n\n          if (!loop) {\n            this.dispatchEvent(new SpeechRecognitionEvent('start'));\n          }\n\n          if (errorMessage) {\n            if (/1006/u.test(errorMessage)) {\n              if (!audioStarted) {\n                this.dispatchEvent(new SpeechRecognitionEvent('audiostart'));\n                this.dispatchEvent(new SpeechRecognitionEvent('audioend'));\n              }\n\n              finalEvent = {\n                error: 'network',\n                type: 'error'\n              };\n            } else {\n              finalEvent = {\n                error: 'unknown',\n                type: 'error'\n              };\n            }\n\n            break;\n          } else if (abort || stop) {\n            if (abort) {\n              finalEvent = {\n                error: 'aborted',\n                type: 'error'\n              };\n\n              // If we are aborting, we will ignore lingering recognizing/recognized events. But if we are stopping, we need them.\n              stopping = 'abort';\n            } else {\n              // When we pause, we will send { isEnd: true }, Speech Services will send us \"recognized\" event.\n              pause();\n              stopping = 'stop';\n            }\n\n            // Abort should not be dispatched without support of \"stopContinuousRecognitionAsync\".\n            // But for defensive purpose, we make sure \"stopContinuousRecognitionAsync\" is available before we can call.\n            if (abort && recognizer.stopContinuousRecognitionAsync) {\n              await cognitiveServicesAsyncToPromise(recognizer.stopContinuousRecognitionAsync.bind(recognizer))();\n            }\n          } else if (audioSourceReady) {\n            this.dispatchEvent(new SpeechRecognitionEvent('audiostart'));\n\n            audioStarted = true;\n          } else if (firstAudibleChunk) {\n            this.dispatchEvent(new SpeechRecognitionEvent('soundstart'));\n\n            soundStarted = true;\n          } else if (audioSourceOff) {\n            // Looks like we don't need this line and all the tests are still working.\n            // Guessing probably stopping is already truthy.\n            // stopping = true;\n\n            speechStarted && this.dispatchEvent(new SpeechRecognitionEvent('speechend'));\n            soundStarted && this.dispatchEvent(new SpeechRecognitionEvent('soundend'));\n            audioStarted && this.dispatchEvent(new SpeechRecognitionEvent('audioend'));\n\n            audioStarted = soundStarted = speechStarted = false;\n\n            break;\n          } else if (stopping !== 'abort') {\n            if (recognized && recognized.result && recognized.result.reason === ResultReason.NoMatch) {\n              finalEvent = {\n                error: 'no-speech',\n                type: 'error'\n              };\n            } else if (recognized || recognizing) {\n              if (!audioStarted) {\n                // Unconfirmed prevention of quirks\n                this.dispatchEvent(new SpeechRecognitionEvent('audiostart'));\n\n                audioStarted = true;\n              }\n\n              if (!soundStarted) {\n                this.dispatchEvent(new SpeechRecognitionEvent('soundstart'));\n\n                soundStarted = true;\n              }\n\n              if (!speechStarted) {\n                this.dispatchEvent(new SpeechRecognitionEvent('speechstart'));\n\n                speechStarted = true;\n              }\n\n              if (recognized) {\n                const result = cognitiveServiceEventResultToWebSpeechRecognitionResultList(recognized.result, {\n                  maxAlternatives: this.maxAlternatives,\n                  textNormalization\n                });\n\n                const recognizable = !!result[0].transcript;\n\n                if (recognizable) {\n                  finalizedResults = [...finalizedResults, result];\n\n                  this.continuous &&\n                    this.dispatchEvent(\n                      new SpeechRecognitionEvent('result', {\n                        results: finalizedResults\n                      })\n                    );\n                }\n\n                // If it is continuous, we just sent the finalized results. So we don't need to send it again after \"audioend\" event.\n                if (this.continuous && recognizable) {\n                  finalEvent = null;\n                } else {\n                  finalEvent = {\n                    results: finalizedResults,\n                    type: 'result'\n                  };\n                }\n\n                if (!this.continuous && recognizer.stopContinuousRecognitionAsync) {\n                  await cognitiveServicesAsyncToPromise(recognizer.stopContinuousRecognitionAsync.bind(recognizer))();\n                }\n\n                // If event order can be loosened, we can send the recognized event as soon as we receive it.\n                // 1. If it is not recognizable (no-speech), we should send an \"error\" event just before \"end\" event. We will not loosen \"error\" events.\n                if (looseEvents && finalEvent && recognizable) {\n                  this.dispatchEvent(new SpeechRecognitionEvent(finalEvent.type, finalEvent));\n                  finalEvent = null;\n                }\n              } else if (recognizing) {\n                this.interimResults &&\n                  this.dispatchEvent(\n                    new SpeechRecognitionEvent('result', {\n                      results: [\n                        ...finalizedResults,\n                        cognitiveServiceEventResultToWebSpeechRecognitionResultList(recognizing.result, {\n                          maxAlternatives: this.maxAlternatives,\n                          textNormalization\n                        })\n                      ]\n                    })\n                  );\n              }\n            }\n          }\n        }\n\n        if (speechStarted) {\n          this.dispatchEvent(new SpeechRecognitionEvent('speechend'));\n        }\n\n        if (soundStarted) {\n          this.dispatchEvent(new SpeechRecognitionEvent('soundend'));\n        }\n\n        if (audioStarted) {\n          this.dispatchEvent(new SpeechRecognitionEvent('audioend'));\n        }\n\n        if (finalEvent) {\n          if (finalEvent.type === 'result' && !finalEvent.results.length) {\n            finalEvent = {\n              error: 'no-speech',\n              type: 'error'\n            };\n          }\n\n          if (finalEvent.type === 'error') {\n            this.dispatchEvent(new ErrorEvent('error', finalEvent));\n          } else {\n            this.dispatchEvent(new SpeechRecognitionEvent(finalEvent.type, finalEvent));\n          }\n        }\n\n        // Even though there is no \"start\" event emitted, we will still emit \"end\" event\n        // This is mainly for \"microphone blocked\" story.\n        this.dispatchEvent(new SpeechRecognitionEvent('end'));\n\n        detachAudioConfigEvent();\n      } catch (err) {\n        // Logging out the erorr because Speech SDK would fail silently.\n        console.error(err);\n\n        throw err;\n      } finally {\n        unprepare();\n        recognizer.dispose();\n      }\n    }\n  }\n\n  return {\n    SpeechGrammarList,\n    SpeechRecognition,\n    SpeechRecognitionEvent\n  };\n}\n\nexport default options => {\n  const {\n    audioConfig = AudioConfig.fromDefaultMicrophoneInput(),\n\n    // We set telemetry to true to honor the default telemetry settings of Speech SDK\n    // https://github.com/Microsoft/cognitive-services-speech-sdk-js#data--telemetry\n    enableTelemetry = true,\n\n    fetchCredentials,\n    looseEvents,\n    referenceGrammars,\n    speechRecognitionEndpointId,\n    textNormalization = 'display'\n  } = patchOptions(options);\n\n  if (!audioConfig && (!window.navigator.mediaDevices || !window.navigator.mediaDevices.getUserMedia)) {\n    console.warn(\n      'web-speech-cognitive-services: This browser does not support WebRTC and it will not work with Cognitive Services Speech Services.'\n    );\n\n    return {};\n  }\n\n  const createRecognizer = async lang => {\n    const { authorizationToken, region, speechRecognitionHostname, subscriptionKey } = await fetchCredentials();\n    let speechConfig;\n\n    if (speechRecognitionHostname) {\n      const host = { hostname: speechRecognitionHostname, port: 443, protocol: 'wss:' };\n\n      if (authorizationToken) {\n        speechConfig = SpeechConfig.fromHost(host);\n        speechConfig.authorizationToken = authorizationToken;\n      } else {\n        speechConfig = SpeechConfig.fromHost(host, subscriptionKey);\n      }\n    } else {\n      speechConfig = authorizationToken\n        ? SpeechConfig.fromAuthorizationToken(authorizationToken, region)\n        : SpeechConfig.fromSubscription(subscriptionKey, region);\n    }\n\n    if (speechRecognitionEndpointId) {\n      speechConfig.endpointId = speechRecognitionEndpointId;\n    }\n\n    speechConfig.outputFormat = OutputFormat.Detailed;\n    speechConfig.speechRecognitionLanguage = lang || 'en-US';\n\n    return new SpeechRecognizer(speechConfig, audioConfig);\n  };\n\n  return createSpeechRecognitionPonyfillFromRecognizer({\n    audioConfig,\n    createRecognizer,\n    enableTelemetry,\n    looseEvents,\n    referenceGrammars,\n    textNormalization\n  });\n};\n","import arrayToMap from '../../Util/arrayToMap';\nimport SpeechSDK from '../SpeechSDK';\n\nconst {\n  ResultReason: { RecognizingSpeech, RecognizedSpeech }\n} = SpeechSDK;\n\nexport default function(result, { maxAlternatives = Infinity, textNormalization = 'display' } = {}) {\n  if (result.reason === RecognizingSpeech || (result.reason === RecognizedSpeech && !result.json.NBest)) {\n    const resultList = [\n      {\n        confidence: 0.5,\n        transcript: result.text\n      }\n    ];\n\n    if (result.reason === RecognizedSpeech) {\n      resultList.isFinal = true;\n    }\n\n    return resultList;\n  } else if (result.reason === RecognizedSpeech) {\n    const resultList = arrayToMap(\n      (result.json.NBest || [])\n        .slice(0, maxAlternatives)\n        .map(({ Confidence: confidence, Display: display, ITN: itn, Lexical: lexical, MaskedITN: maskedITN }) => ({\n          confidence,\n          transcript:\n            textNormalization === 'itn'\n              ? itn\n              : textNormalization === 'lexical'\n              ? lexical\n              : textNormalization === 'maskeditn'\n              ? maskedITN\n              : display\n        })),\n      { isFinal: true }\n    );\n\n    return resultList;\n  }\n\n  return [];\n}\n","export default function(array, extras) {\n  const map = {\n    ...[].reduce.call(\n      array,\n      (map, value, index) => {\n        map[index] = value;\n\n        return map;\n      },\n      {}\n    ),\n    ...extras,\n    length: array.length,\n    [Symbol.iterator]: () => [].slice.call(map)[Symbol.iterator]()\n  };\n\n  return map;\n}\n","import createDeferred from 'p-defer-es5';\n\nexport default function() {\n  let shiftDeferred;\n  const queue = [];\n\n  const push = value => {\n    if (shiftDeferred) {\n      const { resolve } = shiftDeferred;\n\n      shiftDeferred = null;\n      resolve(value);\n    } else {\n      queue.push(value);\n    }\n  };\n\n  const shift = () => {\n    if (queue.length) {\n      return Promise.resolve(queue.shift());\n    }\n\n    return (shiftDeferred || (shiftDeferred = createDeferred())).promise;\n  };\n\n  return {\n    push,\n    shift\n  };\n}\n","export default function resolveFunctionOrReturnValue(fnOrValue) {\n  return typeof fnOrValue === 'function' ? fnOrValue() : fnOrValue;\n}\n","/* eslint class-methods-use-this: \"off\" */\n\nexport default class {\n  constructor() {\n    this._phrases = [];\n  }\n\n  addFromString() {\n    throw new Error('JSGF is not supported');\n  }\n\n  get phrases() {\n    return this._phrases;\n  }\n\n  set phrases(value) {\n    if (Array.isArray(value)) {\n      this._phrases = value;\n    } else if (typeof value === 'string') {\n      this._phrases = [value];\n    } else {\n      throw new Error(`The provided value is not an array or of type 'string'`);\n    }\n  }\n}\n","import createSpeechSynthesisPonyfill from './TextToSpeech/createSpeechSynthesisPonyfill';\n\nexport default createSpeechSynthesisPonyfill;\n","/* eslint class-methods-use-this: 0 */\n\nimport { EventTarget, getEventAttributeValue, setEventAttributeValue } from 'event-target-shim/es5';\nimport createDeferred from 'p-defer-es5';\nimport onErrorResumeNext from 'on-error-resume-next';\n\nimport AudioContextQueue from './AudioContextQueue';\nimport fetchCustomVoices from './fetchCustomVoices';\nimport fetchVoices from './fetchVoices';\nimport patchOptions from '../patchOptions';\nimport SpeechSynthesisEvent from './SpeechSynthesisEvent';\nimport SpeechSynthesisUtterance from './SpeechSynthesisUtterance';\n\n// Supported output format can be found at https://docs.microsoft.com/en-us/azure/cognitive-services/speech-service/rest-text-to-speech#audio-outputs\nconst DEFAULT_OUTPUT_FORMAT = 'audio-24khz-160kbitrate-mono-mp3';\nconst EMPTY_ARRAY = [];\n\nexport default options => {\n  const {\n    audioContext,\n    fetchCredentials,\n    ponyfill = {\n      AudioContext: window.AudioContext || window.webkitAudioContext\n    },\n    speechSynthesisDeploymentId,\n    speechSynthesisOutputFormat = DEFAULT_OUTPUT_FORMAT\n  } = patchOptions(options);\n\n  if (!audioContext && !ponyfill.AudioContext) {\n    console.warn(\n      'web-speech-cognitive-services: This browser does not support Web Audio and it will not work with Cognitive Services Speech Services.'\n    );\n\n    return {};\n  }\n\n  class SpeechSynthesis extends EventTarget {\n    constructor() {\n      super();\n\n      this.queue = new AudioContextQueue({ audioContext, ponyfill });\n\n      this.updateVoices();\n    }\n\n    cancel() {\n      this.queue.stop();\n    }\n\n    getVoices() {\n      return EMPTY_ARRAY;\n    }\n\n    get onvoiceschanged() {\n      return getEventAttributeValue(this, 'voiceschanged');\n    }\n\n    set onvoiceschanged(value) {\n      setEventAttributeValue(this, 'voiceschanged', value);\n    }\n\n    pause() {\n      this.queue.pause();\n    }\n\n    resume() {\n      this.queue.resume();\n    }\n\n    speak(utterance) {\n      if (!(utterance instanceof SpeechSynthesisUtterance)) {\n        throw new Error('invalid utterance');\n      }\n\n      const { reject, resolve, promise } = createDeferred();\n      const handleError = ({ error: errorCode, message }) => {\n        const error = new Error(errorCode);\n\n        error.stack = message;\n\n        reject(error);\n      };\n\n      utterance.addEventListener('end', resolve);\n      utterance.addEventListener('error', handleError);\n\n      utterance.preload({\n        deploymentId: speechSynthesisDeploymentId,\n        fetchCredentials,\n        outputFormat: speechSynthesisOutputFormat\n      });\n\n      this.queue.push(utterance);\n\n      return promise.finally(() => {\n        utterance.removeEventListener('end', resolve);\n        utterance.removeEventListener('error', handleError);\n      });\n    }\n\n    get speaking() {\n      return this.queue.speaking;\n    }\n\n    async updateVoices() {\n      const { customVoiceHostname, region, speechSynthesisHostname, subscriptionKey } = await fetchCredentials();\n\n      if (speechSynthesisDeploymentId) {\n        if (subscriptionKey) {\n          console.warn(\n            'web-speech-cognitive-services: Listing of custom voice models are only available when using subscription key.'\n          );\n\n          await onErrorResumeNext(async () => {\n            const voices = await fetchCustomVoices({\n              customVoiceHostname,\n              deploymentId: speechSynthesisDeploymentId,\n              region,\n              speechSynthesisHostname,\n              subscriptionKey\n            });\n\n            this.getVoices = () => voices;\n          });\n        }\n      } else {\n        // If fetch voice list failed, we will not emit \"voiceschanged\" event.\n        // In the spec, there is no \"error\" event.\n\n        await onErrorResumeNext(async () => {\n          const voices = await fetchVoices(await fetchCredentials());\n\n          this.getVoices = () => voices;\n        });\n      }\n\n      this.dispatchEvent(new SpeechSynthesisEvent('voiceschanged'));\n    }\n  }\n\n  return {\n    speechSynthesis: new SpeechSynthesis(),\n    SpeechSynthesisEvent,\n    SpeechSynthesisUtterance\n  };\n};\n","/* eslint no-await-in-loop: \"off\" */\n\nimport memoize from 'memoize-one';\n\nimport AudioContextConsumer from './AudioContextConsumer';\n\nexport default class {\n  constructor({ audioContext, ponyfill }) {\n    this.consumer = null;\n    this.paused = false;\n    this.queue = [];\n\n    this.getAudioContext = memoize(() => audioContext || new ponyfill.AudioContext());\n  }\n\n  pause() {\n    this.paused = true;\n    this.consumer && this.consumer.pause();\n  }\n\n  push(utterance) {\n    this.queue.push(utterance);\n    this.startConsumer();\n  }\n\n  resume() {\n    this.paused = false;\n\n    if (this.consumer) {\n      this.consumer.resume();\n    } else {\n      this.startConsumer();\n    }\n  }\n\n  get speaking() {\n    return !!this.consumer;\n  }\n\n  async startConsumer() {\n    while (!this.paused && this.queue.length && !this.consumer) {\n      this.consumer = new AudioContextConsumer(this.getAudioContext());\n\n      await this.consumer.start(this.queue);\n\n      this.consumer = null;\n    }\n  }\n\n  stop() {\n    this.queue.splice(0);\n    this.consumer && this.consumer.stop();\n  }\n}\n","/* eslint no-await-in-loop: \"off\" */\n\nexport default class {\n  constructor(audioContext) {\n    this.audioContext = audioContext;\n  }\n\n  pause() {\n    this.audioContext && this.audioContext.suspend();\n    this.playingUtterance && this.playingUtterance.dispatchEvent(new CustomEvent('pause'));\n  }\n\n  resume() {\n    this.audioContext && this.audioContext.resume();\n    this.playingUtterance && this.playingUtterance.dispatchEvent(new CustomEvent('resume'));\n  }\n\n  async start(queue) {\n    let utterance;\n\n    while ((utterance = queue.shift())) {\n      this.playingUtterance = utterance;\n\n      await utterance.play(this.audioContext);\n\n      this.playingUtterance = null;\n    }\n  }\n\n  stop() {\n    this.playingUtterance && this.playingUtterance.stop();\n\n    if (this.audioContext.state === 'suspended') {\n      // Play -> Pause -> Cancel (stop)\n      // This would generate these events: \"start\", \"pause\", \"end\"\n\n      // Without this code, the \"end\" event will not emit until resume() is called\n      // Cancelling an unstarted utterance will not emit any \"start\" or \"end\" event\n      this.audioContext.resume();\n    }\n  }\n}\n","/* eslint no-magic-numbers: [\"error\", { \"ignore\": [0, 1, -1] }] */\n\nimport SpeechSynthesisVoice from './SpeechSynthesisVoice';\n\nasync function fetchCustomVoices({ customVoiceHostname, deploymentId, region, subscriptionKey }) {\n  const hostname = customVoiceHostname || `${ region }.customvoice.api.speech.microsoft.com`;\n\n  // Although encodeURI on a hostname doesn't work as expected for hostname, at least, it will fail peacefully.\n  const res = await fetch(\n    `https://${ encodeURI(hostname) }/api/texttospeech/v2.0/endpoints/${ encodeURIComponent(deploymentId) }`,\n    {\n      headers: {\n        accept: 'application/json',\n        'ocp-apim-subscription-key': subscriptionKey\n      }\n    }\n  );\n\n  if (!res.ok) {\n    throw new Error('Failed to fetch custom voices');\n  }\n\n  return res.json();\n}\n\nexport default async function({ customVoiceHostname, deploymentId, region, subscriptionKey }) {\n  const { models } = await fetchCustomVoices({ customVoiceHostname, deploymentId, region, subscriptionKey });\n\n  return models\n    .map(\n      ({ properties: { Gender: gender }, locale: lang, name: voiceURI }) =>\n        new SpeechSynthesisVoice({ gender, lang, voiceURI })\n    )\n    .sort(({ name: x }, { name: y }) => (x > y ? 1 : x < y ? -1 : 0));\n}\n","/* eslint no-magic-numbers: [\"error\", { \"ignore\": [0, 1, -1] }] */\n\nimport SpeechSynthesisVoice from './SpeechSynthesisVoice';\n\nexport default async function fetchVoices({ authorizationToken, region, speechSynthesisHostname, subscriptionKey }) {\n  // Although encodeURI on a hostname doesn't work as expected for hostname, at least, it will fail peacefully.\n  const hostname = speechSynthesisHostname || `${ encodeURI(region) }.tts.speech.microsoft.com`;\n  const res = await fetch(`https://${ hostname }/cognitiveservices/voices/list`, {\n    headers: {\n      'content-type': 'application/json',\n      ...(authorizationToken\n        ? {\n            authorization: `Bearer ${ authorizationToken }`\n          }\n        : {\n            'Ocp-Apim-Subscription-Key': subscriptionKey\n          })\n    }\n  });\n\n  if (!res.ok) {\n    throw new Error('Failed to fetch voices');\n  }\n\n  const voices = await res.json();\n\n  return voices\n    .map(({ Gender: gender, Locale: lang, Name: voiceURI }) => new SpeechSynthesisVoice({ gender, lang, voiceURI }))\n    .sort(({ name: x }, { name: y }) => (x > y ? 1 : x < y ? -1 : 0));\n}\n","/* eslint no-empty: [\"error\", { \"allowEmptyCatch\": true }] */\n\nimport { EventTarget, getEventAttributeValue, setEventAttributeValue } from 'event-target-shim/es5';\nimport EventAsPromise from 'event-as-promise';\n\nimport fetchSpeechData from './fetchSpeechData';\nimport SpeechSynthesisEvent from './SpeechSynthesisEvent';\nimport subscribeEvent from './subscribeEvent';\n\nfunction asyncDecodeAudioData(audioContext, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    const promise = audioContext.decodeAudioData(arrayBuffer, resolve, reject);\n\n    // Newer implementation of \"decodeAudioData\" will return a Promise\n    promise && typeof promise.then === 'function' && resolve(promise);\n  });\n}\n\nfunction playDecoded(audioContext, audioBuffer, source) {\n  return new Promise((resolve, reject) => {\n    const audioContextClosed = new EventAsPromise();\n    const sourceEnded = new EventAsPromise();\n    const unsubscribe = subscribeEvent(\n      audioContext,\n      'statechange',\n      ({ target: { state } }) => state === 'closed' && audioContextClosed.eventListener()\n    );\n\n    try {\n      source.buffer = audioBuffer;\n      // \"ended\" may not fire if the underlying AudioContext is closed prematurely\n      source.onended = sourceEnded.eventListener;\n\n      source.connect(audioContext.destination);\n      source.start(0);\n\n      Promise.race([audioContextClosed.upcoming(), sourceEnded.upcoming()]).then(resolve);\n    } catch (err) {\n      reject(err);\n    } finally {\n      unsubscribe();\n    }\n  });\n}\n\nclass SpeechSynthesisUtterance extends EventTarget {\n  constructor(text) {\n    super();\n\n    this._lang = null;\n    this._pitch = 1;\n    this._rate = 1;\n    this._voice = null;\n    this._volume = 1;\n\n    this.text = text;\n\n    this.onboundary = null;\n    this.onend = null;\n    this.onerror = null;\n    this.onmark = null;\n    this.onpause = null;\n    this.onresume = null;\n    this.onstart = null;\n  }\n\n  get lang() {\n    return this._lang;\n  }\n\n  set lang(value) {\n    this._lang = value;\n  }\n\n  get onboundary() {\n    return getEventAttributeValue(this, 'boundary');\n  }\n\n  set onboundary(value) {\n    setEventAttributeValue(this, 'boundary', value);\n  }\n\n  get onend() {\n    return getEventAttributeValue(this, 'end');\n  }\n\n  set onend(value) {\n    setEventAttributeValue(this, 'end', value);\n  }\n\n  get onerror() {\n    return getEventAttributeValue(this, 'error');\n  }\n\n  set onerror(value) {\n    setEventAttributeValue(this, 'error', value);\n  }\n\n  get onmark() {\n    return getEventAttributeValue(this, 'mark');\n  }\n\n  set onmark(value) {\n    setEventAttributeValue(this, 'mark', value);\n  }\n\n  get onpause() {\n    return getEventAttributeValue(this, 'pause');\n  }\n\n  set onpause(value) {\n    setEventAttributeValue(this, 'pause', value);\n  }\n\n  get onresume() {\n    return getEventAttributeValue(this, 'resume');\n  }\n\n  set onresume(value) {\n    setEventAttributeValue(this, 'resume', value);\n  }\n\n  get onstart() {\n    return getEventAttributeValue(this, 'start');\n  }\n\n  set onstart(value) {\n    setEventAttributeValue(this, 'start', value);\n  }\n\n  get pitch() {\n    return this._pitch;\n  }\n\n  set pitch(value) {\n    this._pitch = value;\n  }\n\n  get rate() {\n    return this._rate;\n  }\n\n  set rate(value) {\n    this._rate = value;\n  }\n\n  get voice() {\n    return this._voice;\n  }\n\n  set voice(value) {\n    this._voice = value;\n  }\n\n  get volume() {\n    return this._volume;\n  }\n\n  set volume(value) {\n    this._volume = value;\n  }\n\n  preload({ deploymentId, fetchCredentials, outputFormat }) {\n    this.arrayBufferPromise = fetchSpeechData({\n      fetchCredentials,\n      deploymentId,\n      lang: this.lang || window.navigator.language,\n      outputFormat,\n      pitch: this.pitch,\n      rate: this.rate,\n      text: this.text,\n      voice: this.voice && this.voice.voiceURI,\n      volume: this.volume\n    });\n\n    // We need to call \"catch\" to make sure the Promise is running.\n    // We will ignore the reject result and handled in play() later.\n    this.arrayBufferPromise.catch();\n  }\n\n  async play(audioContext) {\n    try {\n      // We should emit \"start\" event even if preload() failed.\n      this.dispatchEvent(new SpeechSynthesisEvent('start'));\n\n      // HACK: iOS requires bufferSourceNode to be constructed before decoding data.\n      const source = audioContext.createBufferSource();\n      const audioBuffer = await asyncDecodeAudioData(audioContext, await this.arrayBufferPromise);\n\n      this._playingSource = source;\n\n      await playDecoded(audioContext, audioBuffer, source);\n\n      this._playingSource = null;\n      this.dispatchEvent(new SpeechSynthesisEvent('end'));\n    } catch (error) {\n      // \"message\" is not in spec but to provide a friendly message.\n      this.dispatchEvent(new ErrorEvent('error', { error: 'synthesis-failed', message: error.stack }));\n    }\n  }\n\n  stop() {\n    this._playingSource && this._playingSource.stop();\n  }\n}\n\nexport default SpeechSynthesisUtterance;\n","import { decode } from 'base64-arraybuffer';\nimport buildSSML from './buildSSML';\nimport isSSML from './isSSML';\n\nconst DEFAULT_LANGUAGE = 'en-US';\nconst DEFAULT_OUTPUT_FORMAT = 'riff-16khz-16bit-mono-pcm';\nconst DEFAULT_VOICE = 'Microsoft Server Speech Text to Speech Voice (en-US, AriaNeural)';\nconst EMPTY_MP3_BASE64 =\n  'SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU3LjU2LjEwMQAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABhgC7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7//////////////////////////////////////////////////////////////////8AAAAATGF2YzU3LjY0AAAAAAAAAAAAAAAAJAUHAAAAAAAAAYYoRBqpAAAAAAD/+xDEAAPAAAGkAAAAIAAANIAAAARMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMQpg8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV';\n\nexport default async function({\n  deploymentId,\n  fetchCredentials,\n  lang = DEFAULT_LANGUAGE,\n  outputFormat = DEFAULT_OUTPUT_FORMAT,\n  pitch,\n  rate,\n  text,\n  voice = DEFAULT_VOICE,\n  volume\n}) {\n  if (!text) {\n    // If text is empty, play a short audio clip. This allows developers to easily prime the AudioContext object by playing an empty string.\n    return decode(EMPTY_MP3_BASE64);\n  }\n\n  const { authorizationToken, region, speechSynthesisHostname, subscriptionKey } = await fetchCredentials();\n\n  if ((authorizationToken && subscriptionKey) || (!authorizationToken && !subscriptionKey)) {\n    throw new Error('Only \"authorizationToken\" or \"subscriptionKey\" should be set.');\n  } else if ((region && speechSynthesisHostname) || (!region && !speechSynthesisHostname)) {\n    throw new Error('Only \"region\" or \"speechSynthesisHostnamename\" should be set.');\n  }\n\n  const ssml = isSSML(text) ? text : buildSSML({ lang, pitch, rate, text, voice, volume });\n\n  // Although calling encodeURI on hostname does not actually works, it fails faster and safer.\n  const hostname =\n    speechSynthesisHostname ||\n    (deploymentId\n      ? `${ encodeURI(region) }.voice.speech.microsoft.com`\n      : `${ encodeURI(region) }.tts.speech.microsoft.com`);\n  const search = deploymentId ? `?deploymentId=${ encodeURI(deploymentId) }` : '';\n  const url = `https://${ hostname }/cognitiveservices/v1${ search }`;\n\n  const res = await fetch(url, {\n    headers: {\n      'Content-Type': 'application/ssml+xml',\n      'X-Microsoft-OutputFormat': outputFormat,\n      ...(authorizationToken\n        ? {\n            Authorization: `Bearer ${ authorizationToken }`\n          }\n        : {\n            'Ocp-Apim-Subscription-Key': subscriptionKey\n          })\n    },\n    method: 'POST',\n    body: ssml\n  });\n\n  if (!res.ok) {\n    throw new Error(`web-speech-cognitive-services: Failed to syntheis speech, server returned ${ res.status }`);\n  }\n\n  return res.arrayBuffer();\n}\n","/* eslint no-magic-numbers: [\"error\", { \"ignore\": [0, 1, 100] }] */\n\n// Cognitive Services does not support unsigned percentage\n// It must be converted into +/- first.\nfunction relativePercentage(value) {\n  let relative = Math.round((value - 1) * 100);\n\n  if (relative >= 0) {\n    relative = '+' + relative;\n  }\n\n  return relative + '%';\n}\n\nexport default function buildSSML({ lang, pitch = 1, rate = 1, text, voice, volume }) {\n  return `<speak version=\"1.0\" xml:lang=\"${ lang }\">\n  <voice xml:lang=\"${ lang }\" name=\"${ voice }\">\n    <prosody pitch=\"${ relativePercentage(pitch) }\" rate=\"${ relativePercentage(rate) }\" volume=\"${ relativePercentage(\n    volume\n  ) }\">\n      ${ text }\n    </prosody>\n  </voice>\n</speak>`;\n}\n","const SPEAK_TAG_PATTERN = /^\\s*<speak(\\s|\\/?>)/u;\nconst XML_PROLOG_PATTERN = /^\\s*<\\?xml\\s/u;\n\nexport default function isSSML(text) {\n  return SPEAK_TAG_PATTERN.test(text) || XML_PROLOG_PATTERN.test(text);\n}\n","export default function subscribeEvent(target, name, handler) {\n  target.addEventListener(name, handler);\n\n  return () => target.removeEventListener(name, handler);\n}\n","const TOKEN_URL_TEMPLATE = 'https://{region}.api.cognitive.microsoft.com/sts/v1.0/issueToken';\n\nexport default async function ({ region, subscriptionKey }) {\n  const res = await fetch(\n    TOKEN_URL_TEMPLATE.replace(/\\{region\\}/u, region),\n    {\n      headers: {\n        'Ocp-Apim-Subscription-Key': subscriptionKey\n      },\n      method: 'POST'\n    }\n  );\n\n  if (!res.ok) {\n    throw new Error(`Failed to fetch authorization token, server returned ${ res.status }`);\n  }\n\n  return res.text();\n}\n","import { css } from 'glamor';\nimport React from 'react';\n\nconst FORK_ME_CSS = css({\n  border: 0,\n  position: 'fixed',\n  right: 0,\n  top: 0\n});\n\nexport default ({ owner, repo }) => (\n  <a href={`https://github.com/${encodeURI(owner)}/${encodeURI(repo)}`} rel=\"noopener noreferrer\" target=\"_blank\">\n    <img\n      alt=\"Fork me on GitHub\"\n      className={FORK_ME_CSS}\n      src=\"https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png\"\n    />\n  </a>\n);\n","export default function getPonyfillCapabilities(ponyfillType) {\n  const browser = ponyfillType === 'browser';\n  const speechServices = /^speechservices:/u.test(ponyfillType);\n\n  const bundle = browser || ponyfillType === 'speechservices:bundle';\n  const npm = ponyfillType === 'speechservices:npm';\n\n  const customSpeech = speechServices;\n  const customVoice = speechServices;\n  const dynamicPhrases = speechServices;\n  const inverseTextNormalization = speechServices;\n  const maxAlternatives = browser || speechServices;\n  const referenceGrammarId = speechServices;\n  const telemetry = speechServices;\n\n  return {\n    browser,\n    bundle,\n    customSpeech,\n    customVoice,\n    dynamicPhrases,\n    inverseTextNormalization,\n    maxAlternatives,\n    npm,\n    referenceGrammarId,\n    speechServices,\n    telemetry\n  };\n}\n","import React from 'react';\n\nconst Option = ({ disabled, text, value }) => (\n  <option disabled={disabled} value={value}>\n    {text}\n  </option>\n);\n\nexport default ({ children, disabled, onChange, value }) => (\n  <select\n    className=\"custom-select\"\n    disabled={disabled}\n    onChange={({ target: { value } }) => onChange && onChange(value)}\n    value={value}\n  >\n    {children}\n  </select>\n);\n\nexport { Option };\n","const SET_ENABLE_TELEMETRY = 'SET_ENABLE_TELEMETRY';\n\nexport default function setEnableTelemetry(enableTelemetry) {\n  return {\n    type: SET_ENABLE_TELEMETRY,\n    payload: { enableTelemetry }\n  };\n}\n\nexport { SET_ENABLE_TELEMETRY };\n","const SET_PONYFILL_TYPE = 'SET_PONYFILL_TYPE';\n\nexport default function setPonyfillType(ponyfillType) {\n  return {\n    type: SET_PONYFILL_TYPE,\n    payload: { ponyfillType }\n  };\n}\n\nexport { SET_PONYFILL_TYPE };\n","import { useDispatch, useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\n\nimport getPonyfillCapabilities from '../getPonyfillCapabilities';\nimport Select, { Option } from '../Bootstrap/Select';\nimport setEnableTelemetry from '../data/actions/setEnableTelemetry';\nimport setPonyfillType from '../data/actions/setPonyfillType';\n\nconst PonyfillSelector = () => {\n  const { browserSupportedSpeechRecognition, ponyfillType, enableTelemetry } = useSelector(\n    ({ browserSupportedSpeechRecognition, ponyfillType, enableTelemetry }) => ({\n      browserSupportedSpeechRecognition,\n      ponyfillType,\n      enableTelemetry\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchSetEnableTelemetry = useCallback(() => dispatch(setEnableTelemetry(!enableTelemetry)), [\n    dispatch,\n    enableTelemetry\n  ]);\n  const dispatchSetPonyfillType = useCallback(value => dispatch(setPonyfillType(value)), [dispatch]);\n  const ponyfillCapabilities = getPonyfillCapabilities(ponyfillType);\n\n  return (\n    <div className=\"input-group\">\n      <Select onChange={dispatchSetPonyfillType} value={ponyfillType}>\n        <Option disabled={!browserSupportedSpeechRecognition} text=\"Browser\" value=\"browser\" />\n        <Option text=\"Speech Services\" value=\"speechservices:npm\" />\n        <Option text=\"Speech Services (via bundle)\" value=\"speechservices:bundle\" />\n      </Select>\n      <div className=\"input-group-append\">\n        <button\n          className={classNames('btn btn-outline-secondary', { active: enableTelemetry })}\n          disabled={!ponyfillCapabilities.telemetry}\n          onClick={dispatchSetEnableTelemetry}\n          type=\"button\"\n        >\n          Telemetry\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PonyfillSelector;\n","const SET_REGION = 'SET_REGION';\n\nexport default function setRegion(region) {\n  return {\n    type: SET_REGION,\n    payload: { region }\n  };\n}\n\nexport { SET_REGION };\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport getPonyfillCapabilities from '../getPonyfillCapabilities';\nimport Select, { Option } from '../Bootstrap/Select';\nimport setRegion from '../data/actions/setRegion';\n\nconst RegionSelector = () => {\n  const { ponyfillType, region } = useSelector(({ ponyfillType, region }) => ({\n    ponyfillType,\n    region\n  }));\n\n  const dispatch = useDispatch();\n  const dispatchSetRegion = useCallback(value => dispatch(setRegion(value)), [dispatch]);\n  const ponyfillCapabilities = getPonyfillCapabilities(ponyfillType);\n\n  return (\n    <Select disabled={!ponyfillCapabilities.speechServices} onChange={dispatchSetRegion} value={region}>\n      <Option text=\"West US\" value=\"westus\" />\n      <Option text=\"West US 2\" value=\"westus2\" />\n      <Option text=\"East US\" value=\"eastus\" />\n      <Option text=\"East US 2\" value=\"eastus2\" />\n      <Option text=\"East Asia\" value=\"eastasia\" />\n      <Option text=\"South East Asia\" value=\"southeastasia\" />\n      <Option text=\"North Europe\" value=\"northeurope\" />\n      <Option text=\"West Europe\" value=\"westeurope\" />\n    </Select>\n  );\n};\n\nexport default RegionSelector;\n","const CONVERT_SPEECH_SERVICES_SUBSCRIPTION_KEY_TO_AUTHORIZATION_TOKEN =\n  'CONVERT_SPEECH_SERVICES_SUBSCRIPTION_KEY_TO_AUTHORIZATION_TOKEN';\n\nexport default function convertSpeechServicesSubscriptionKeyToAuthorizationToken() {\n  return { type: CONVERT_SPEECH_SERVICES_SUBSCRIPTION_KEY_TO_AUTHORIZATION_TOKEN };\n}\n\nexport { CONVERT_SPEECH_SERVICES_SUBSCRIPTION_KEY_TO_AUTHORIZATION_TOKEN };\n","const SET_ON_DEMAND_AUTHORIZATION_TOKEN = 'SET_ON_DEMAND_AUTHORIZATION_TOKEN';\n\nexport default function setOnDemandAuthorizationToken(onDemand) {\n  return {\n    type: SET_ON_DEMAND_AUTHORIZATION_TOKEN,\n    payload: { onDemand }\n  };\n}\n\nexport { SET_ON_DEMAND_AUTHORIZATION_TOKEN };\n","const SET_SPEECH_SERVICES_AUTHORIZATION_TOKEN = 'SET_SPEECH_SERVICES_AUTHORIZATION_TOKEN';\n\nexport default function setSpeechServicesAuthorizationToken(authorizationToken) {\n  return {\n    type: SET_SPEECH_SERVICES_AUTHORIZATION_TOKEN,\n    payload: { authorizationToken }\n  };\n}\n\nexport { SET_SPEECH_SERVICES_AUTHORIZATION_TOKEN };\n","const SET_SPEECH_SERVICES_SUBSCRIPTION_KEY = 'SET_SPEECH_SERVICES_SUBSCRIPTION_KEY';\n\nexport default function setSpeechServicesSubscriptionKey(subscriptionKey) {\n  return {\n    type: SET_SPEECH_SERVICES_SUBSCRIPTION_KEY,\n    payload: { subscriptionKey }\n  };\n}\n\nexport { SET_SPEECH_SERVICES_SUBSCRIPTION_KEY };\n","import { useDispatch, useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\n\nimport convertSpeechServicesSubscriptionKeyToAuthorizationToken from '../data/actions/convertSpeechServicesSubscriptionKeyToAuthorizationToken';\nimport getPonyfillCapabilities from '../getPonyfillCapabilities';\nimport setOnDemandAuthorizationToken from '../data/actions/setOnDemandAuthorizationToken';\nimport setSpeechServicesAuthorizationToken from '../data/actions/setSpeechServicesAuthorizationToken';\nimport setSpeechServicesSubscriptionKey from '../data/actions/setSpeechServicesSubscriptionKey';\n\nconst SubscriptionKeyInput = () => {\n  const { authorizationToken, disabled, onDemandAuthorizationToken, subscriptionKey } = useSelector(\n    ({\n      onDemandAuthorizationToken,\n      ponyfillType,\n      speechServicesAuthorizationToken,\n      speechServicesSubscriptionKey\n    }) => ({\n      authorizationToken: speechServicesAuthorizationToken,\n      disabled: getPonyfillCapabilities(ponyfillType).browser,\n      onDemandAuthorizationToken,\n      subscriptionKey: speechServicesSubscriptionKey\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchSetOnDemandAuthorizationToken = useCallback(value => dispatch(setOnDemandAuthorizationToken(value)), [\n    dispatch\n  ]);\n\n  const dispatchClearAuthorizationToken = useCallback(() => dispatch(setSpeechServicesAuthorizationToken('')), [\n    dispatch\n  ]);\n\n  const dispatchConvertSubscriptionKeyToAuthorizationToken = useCallback(\n    () => dispatch(convertSpeechServicesSubscriptionKeyToAuthorizationToken()),\n    [dispatch]\n  );\n\n  const dispatchSetSubscriptionKey = useCallback(\n    ({ target: { value } }) => dispatch(setSpeechServicesSubscriptionKey(value)),\n    [dispatch]\n  );\n\n  return (\n    <div className=\"input-group\">\n      {authorizationToken ? (\n        <React.Fragment>\n          <input className=\"form-control\" disabled={disabled} readOnly={true} type=\"text\" value={authorizationToken} />\n          <div className=\"input-group-append\">\n            <button className=\"btn btn-outline-secondary\" onClick={dispatchClearAuthorizationToken} type=\"button\">\n              Clear\n            </button>\n          </div>\n        </React.Fragment>\n      ) : (\n        <React.Fragment>\n          <input\n            className=\"form-control\"\n            disabled={disabled}\n            onChange={dispatchSetSubscriptionKey}\n            type=\"text\"\n            value={subscriptionKey}\n          />\n          <div className=\"input-group-append\">\n            <button\n              className={classNames('btn btn-outline-secondary', { active: onDemandAuthorizationToken })}\n              disabled={disabled}\n              onClick={dispatchSetOnDemandAuthorizationToken}\n              type=\"button\"\n            >\n              On-demand\n            </button>\n            <button\n              className=\"btn btn-outline-secondary\"\n              disabled={disabled}\n              onClick={dispatchConvertSubscriptionKeyToAuthorizationToken}\n              type=\"button\"\n            >\n              Convert to authorization token\n            </button>\n          </div>\n        </React.Fragment>\n      )}\n    </div>\n  );\n};\n\nexport default SubscriptionKeyInput;\n","const SET_SPEECH_RECOGNITION_ENDPOINT_ID = 'SET_SPEECH_RECOGNITION_ENDPOINT_ID';\n\nexport default function setSpeechRecognitionEndpointId(endpointId) {\n  return {\n    type: SET_SPEECH_RECOGNITION_ENDPOINT_ID,\n    payload: { endpointId }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_ENDPOINT_ID };\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport getPonyfillCapabilities from '../getPonyfillCapabilities';\nimport setSpeechRecognitionEndpointId from '../data/actions/setSpeechRecognitionEndpointId';\n\nconst SpeechRecognitionEndpointIdInput = () => {\n  const { ponyfillType, speechRecognitionEndpointId } = useSelector(\n    ({ ponyfillType, speechRecognitionEndpointId }) => ({\n      ponyfillType,\n      speechRecognitionEndpointId\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchSetSpeechRecognitionEndpointId = useCallback(\n    ({ target: { value } }) => dispatch(setSpeechRecognitionEndpointId(value)),\n    [dispatch]\n  );\n  const ponyfillCapabilities = getPonyfillCapabilities(ponyfillType);\n\n  return (\n    <input\n      className=\"form-control\"\n      disabled={!ponyfillCapabilities.customSpeech}\n      onChange={dispatchSetSpeechRecognitionEndpointId}\n      type=\"text\"\n      value={speechRecognitionEndpointId}\n    />\n  );\n};\n\nexport default SpeechRecognitionEndpointIdInput;\n","const SET_SPEECH_RECOGNITION_LANGUAGE = 'SET_SPEECH_RECOGNITION_LANGUAGE';\n\nexport default function setSpeechRecognitionLanguage(language) {\n  return {\n    type: SET_SPEECH_RECOGNITION_LANGUAGE,\n    payload: { language }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_LANGUAGE };\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport Select, { Option } from '../Bootstrap/Select';\nimport setSpeechRecognitionLanguage from '../data/actions/setSpeechRecognitionLanguage';\n\nconst RegionSelector = () => {\n  const speechRecognitionLanguage = useSelector(({ speechRecognitionLanguage }) => speechRecognitionLanguage);\n  const dispatch = useDispatch();\n  const dispatchSetSpeechRecognitionLanguage = useCallback(value => dispatch(setSpeechRecognitionLanguage(value)), [\n    dispatch\n  ]);\n\n  return (\n    <Select onChange={dispatchSetSpeechRecognitionLanguage} value={speechRecognitionLanguage}>\n      <Option text=\"English (US)\" value=\"en-US\" />\n      <Option text=\"Chinese (Cantonese)\" value=\"zh-HK\" />\n      <Option text=\"Chinese (Putonghua)\" value=\"zh-CN\" />\n      <Option text=\"Japanese\" value=\"ja-JP\" />\n      <Option text=\"Korean\" value=\"ko-KR\" />\n    </Select>\n  );\n};\n\nexport default RegionSelector;\n","const SET_SPEECH_RECOGNITION_TEXT_NORMALIZATION = 'SET_SPEECH_RECOGNITION_TEXT_NORMALIZATION';\n\nexport default function setSpeechRecognitionTextNormalization(textNormalization) {\n  return {\n    type: SET_SPEECH_RECOGNITION_TEXT_NORMALIZATION,\n    payload: { textNormalization }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_TEXT_NORMALIZATION };\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport getPonyfillCapabilities from '../getPonyfillCapabilities';\nimport Select, { Option } from '../Bootstrap/Select';\nimport setSpeechRecognitionTextNormalization from '../data/actions/setSpeechRecognitionTextNormalization';\n\nconst RegionSelector = () => {\n  const { ponyfillType, speechRecognitionTextNormalization } = useSelector(\n    ({ ponyfillType, speechRecognitionTextNormalization }) => ({\n      ponyfillType,\n      speechRecognitionTextNormalization\n    })\n  );\n\n  const dispatch = useDispatch();\n  const handleChange = useCallback(value => dispatch(setSpeechRecognitionTextNormalization(value)), [dispatch]);\n  const ponyfillCapabilities = getPonyfillCapabilities(ponyfillType);\n\n  return (\n    <Select\n      disabled={!ponyfillCapabilities.inverseTextNormalization}\n      onChange={handleChange}\n      value={speechRecognitionTextNormalization}\n    >\n      <Option text=\"Display (default)\" value=\"display\" />\n      <Option text=\"ITN\" value=\"itn\" />\n      <Option text=\"Masked ITN\" value=\"maskeditn\" />\n      <Option text=\"Lexical\" value=\"lexical\" />\n    </Select>\n  );\n};\n\nexport default RegionSelector;\n","const ABORT_SPEECH_RECOGNITION = 'ABORT_SPEECH_RECOGNITION';\n\nexport default function abortSpeechRecognition() {\n  return { type: ABORT_SPEECH_RECOGNITION };\n}\n\nexport { ABORT_SPEECH_RECOGNITION };\n","const START_SPEECH_RECOGNITION = 'START_SPEECH_RECOGNITION';\n\nexport default function startSpeechRecognition() {\n  return { type: START_SPEECH_RECOGNITION };\n}\n\nexport { START_SPEECH_RECOGNITION };\n","const STOP_SPEECH_RECOGNITION = 'STOP_SPEECH_RECOGNITION';\n\nexport default function stopSpeechRecognition() {\n  return { type: STOP_SPEECH_RECOGNITION };\n}\n\nexport { STOP_SPEECH_RECOGNITION };\n","const CLEAR_SPEECH_RECOGNITION_EVENT = 'CLEAR_SPEECH_RECOGNITION_EVENT';\n\nexport default function clearSpeechRecognitionEvent() {\n  return { type: CLEAR_SPEECH_RECOGNITION_EVENT };\n}\n\nexport { CLEAR_SPEECH_RECOGNITION_EVENT };\n","const SET_SPEECH_RECOGNITION_CONTINUOUS = 'SET_SPEECH_RECOGNITION_CONTINUOUS';\n\nexport default function setSpeechRecognitionContinuous(continuous) {\n  return {\n    type: SET_SPEECH_RECOGNITION_CONTINUOUS,\n    payload: { continuous }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_CONTINUOUS };\n","const SET_SPEECH_RECOGNITION_DELAYED_START = 'SET_SPEECH_RECOGNITION_DELAYED_START';\n\nexport default function setSpeechRecognitionDelayedStart(delay) {\n  return {\n    type: SET_SPEECH_RECOGNITION_DELAYED_START,\n    payload: { delay }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_DELAYED_START };\n","const SET_SPEECH_RECOGNITION_INTERIM_RESULTS = 'SET_SPEECH_RECOGNITION_INTERIM_RESULTS';\n\nexport default function setSpeechRecognitionInterimResults(interimResults) {\n  return {\n    type: SET_SPEECH_RECOGNITION_INTERIM_RESULTS,\n    payload: { interimResults }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_INTERIM_RESULTS };\n","const SET_SPEECH_RECOGNITION_MAX_ALTERNATIVES = 'SET_SPEECH_RECOGNITION_MAX_ALTERNATIVES';\n\nexport default function setSpeechRecognitionMaxAlternatives(maxAlternatives) {\n  return {\n    type: SET_SPEECH_RECOGNITION_MAX_ALTERNATIVES,\n    payload: { maxAlternatives }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_MAX_ALTERNATIVES };\n","const SET_SPEECH_RECOGNITION_PHRASES = 'SET_SPEECH_RECOGNITION_PHRASES';\n\nexport default function setSpeechRecognitionPhrases(phrases) {\n  return {\n    type: SET_SPEECH_RECOGNITION_PHRASES,\n    payload: { phrases }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_PHRASES };\n","const SET_SPEECH_RECOGNITION_REFERENCE_GRAMMARS = 'SET_SPEECH_RECOGNITION_REFERENCE_GRAMMARS';\n\nexport default function setSpeechRecognitionReferenceGrammars(referenceGrammars) {\n  return {\n    type: SET_SPEECH_RECOGNITION_REFERENCE_GRAMMARS,\n    payload: { referenceGrammars }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_REFERENCE_GRAMMARS };\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport Select, { Option } from '../Bootstrap/Select';\nimport SpeechRecognitionEndpointIdInput from './SpeechRecognitionEndpointIdInput';\nimport SpeechRecognitionLanguageSelector from './SpeechRecognitionLanguageSelector';\nimport SpeechRecognitionTextNormalizationSelector from './SpeechRecognitionTextNormalizationSelector';\n\nimport abortSpeechRecognition from '../data/actions/abortSpeechRecognition';\nimport startSpeechRecognition from '../data/actions/startSpeechRecognition';\nimport stopSpeechRecognition from '../data/actions/stopSpeechRecognition';\n\nimport clearSpeechRecognitionEvent from '../data/actions/clearSpeechRecognitionEvent';\nimport getPonyfillCapabilities from '../getPonyfillCapabilities';\nimport setSpeechRecognitionContinuous from '../data/actions/setSpeechRecognitionContinuous';\nimport setSpeechRecognitionDelayedStart from '../data/actions/setSpeechRecognitionDelayedStart';\nimport setSpeechRecognitionInterimResults from '../data/actions/setSpeechRecognitionInterimResults';\nimport setSpeechRecognitionMaxAlternatives from '../data/actions/setSpeechRecognitionMaxAlternatives';\nimport setSpeechRecognitionPhrases from '../data/actions/setSpeechRecognitionPhrases';\nimport setSpeechRecognitionReferenceGrammars from '../data/actions/setSpeechRecognitionReferenceGrammars';\n\nconst SpeechRecognitionCommands = () => {\n  const {\n    continuous,\n    delayedStart,\n    empty,\n    interimResults,\n    maxAlternatives,\n    phrases,\n    ponyfillType,\n    referenceGrammars,\n    started\n  } = useSelector(\n    ({\n      ponyfillType,\n      speechRecognitionEvents,\n      speechRecognitionContinuous,\n      speechRecognitionDelayedStart,\n      speechRecognitionInterimResults,\n      speechRecognitionMaxAlternatives,\n      speechRecognitionPhrases,\n      speechRecognitionReferenceGrammars,\n      speechRecognitionStarted\n    }) => ({\n      continuous: speechRecognitionContinuous,\n      delayedStart: !!speechRecognitionDelayedStart,\n      empty: !speechRecognitionEvents.length,\n      interimResults: speechRecognitionInterimResults,\n      maxAlternatives: speechRecognitionMaxAlternatives,\n      phrases: speechRecognitionPhrases,\n      ponyfillType,\n      referenceGrammars: speechRecognitionReferenceGrammars,\n      started: speechRecognitionStarted\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchAbortSpeechRecognition = useCallback(() => dispatch(abortSpeechRecognition()), [dispatch]);\n  const dispatchClearSpeechRecognitionEvent = useCallback(() => dispatch(clearSpeechRecognitionEvent()), [dispatch]);\n  const dispatchSetSpeechRecognitionContinuous = useCallback(() => dispatch(setSpeechRecognitionContinuous(true)), [\n    dispatch\n  ]);\n  const dispatchSetSpeechRecognitionDelayedStart = useCallback(() => dispatch(setSpeechRecognitionDelayedStart(true)), [\n    dispatch\n  ]);\n  const dispatchSetSpeechRecognitionHideInterimResults = useCallback(\n    () => dispatch(setSpeechRecognitionInterimResults(false)),\n    [dispatch]\n  );\n  const dispatchSetSpeechRecognitionInteractive = useCallback(() => dispatch(setSpeechRecognitionContinuous(false)), [\n    dispatch\n  ]);\n  const dispatchSetSpeechRecognitionMaxAlternatives = useCallback(\n    value => dispatch(setSpeechRecognitionMaxAlternatives(+value)),\n    [dispatch]\n  );\n  const dispatchSetSpeechRecognitionNoDelayedStart = useCallback(\n    () => dispatch(setSpeechRecognitionDelayedStart(false)),\n    [dispatch]\n  );\n  const dispatchSetSpeechRecognitionPhrases = useCallback(value => dispatch(setSpeechRecognitionPhrases(value)), [\n    dispatch\n  ]);\n  const dispatchSetSpeechRecognitionReferenceGrammars = useCallback(\n    value => dispatch(setSpeechRecognitionReferenceGrammars(value)),\n    [dispatch]\n  );\n  const dispatchSetSpeechRecognitionShowInterimResults = useCallback(\n    () => dispatch(setSpeechRecognitionInterimResults(true)),\n    [dispatch]\n  );\n  const dispatchStartSpeechRecognition = useCallback(() => dispatch(startSpeechRecognition()), [dispatch]);\n  const dispatchStopSpeechRecognition = useCallback(() => dispatch(stopSpeechRecognition()), [dispatch]);\n\n  const [phrasesString, setPhrasesString] = useState();\n  const [referenceGrammarsString, setReferenceGrammarsString] = useState();\n\n  useMemo(() => setPhrasesString(phrases.join(', ')), [phrases]);\n  useMemo(() => setReferenceGrammarsString(referenceGrammars.join(', ')), [referenceGrammars]);\n\n  const ponyfillCapabilities = getPonyfillCapabilities(ponyfillType);\n\n  return (\n    <React.Fragment>\n      <div className=\"row col\" style={{ marginBottom: '1em' }}>\n        <div className=\"btn-group\">\n          <button\n            className=\"btn btn-primary\"\n            disabled={!!started}\n            onClick={dispatchStartSpeechRecognition}\n            type=\"button\"\n          >\n            {continuous\n              ? interimResults\n                ? delayedStart\n                  ? 'Delayed start in continuous mode with interims'\n                  : 'Start in continuous mode with interims'\n                : delayedStart\n                ? 'Delayed start in continuous mode'\n                : 'Start in continuous mode'\n              : interimResults\n              ? delayedStart\n                ? 'Delayed start with interims'\n                : 'Start with interims'\n              : delayedStart\n              ? 'Delayed start'\n              : 'Start'}\n          </button>\n          <button\n            className=\"btn btn-primary dropdown-toggle dropdown-toggle-split\"\n            data-toggle=\"dropdown\"\n            disabled={!!started}\n            aria-haspopup=\"true\"\n            aria-expanded=\"false\"\n          >\n            <span className=\"sr-only\">Toggle dropdown</span>\n          </button>\n          <div className=\"dropdown-menu\">\n            <button className=\"dropdown-item\" onClick={dispatchSetSpeechRecognitionInteractive} type=\"button\">\n              Interactive mode\n            </button>\n            <button className=\"dropdown-item\" onClick={dispatchSetSpeechRecognitionContinuous} type=\"button\">\n              Continuous mode\n            </button>\n            <div className=\"dropdown-divider\" />\n            <button className=\"dropdown-item\" onClick={dispatchSetSpeechRecognitionShowInterimResults} type=\"button\">\n              Show interims\n            </button>\n            <button className=\"dropdown-item\" onClick={dispatchSetSpeechRecognitionHideInterimResults} type=\"button\">\n              Hide interims\n            </button>\n            <div className=\"dropdown-divider\" />\n            <button className=\"dropdown-item\" onClick={dispatchSetSpeechRecognitionDelayedStart} type=\"button\">\n              Delayed start\n            </button>\n            <button className=\"dropdown-item\" onClick={dispatchSetSpeechRecognitionNoDelayedStart} type=\"button\">\n              No delayed start\n            </button>\n          </div>\n        </div>\n        &nbsp;\n        <div className=\"form-group-inline\">\n          <Select\n            disabled={started || !ponyfillCapabilities.maxAlternatives}\n            onChange={dispatchSetSpeechRecognitionMaxAlternatives}\n            value={ponyfillCapabilities.maxAlternatives ? maxAlternatives : 1}\n          >\n            <Option text=\"One alternative\" value=\"1\" />\n            <Option text=\"3 alternatives\" value=\"3\" />\n            <Option text=\"5 alternatives\" value=\"5\" />\n            <Option text=\"10 alternatives\" value=\"10\" />\n          </Select>\n        </div>\n        &nbsp;\n        <div className=\"form-group-inline\">\n          <SpeechRecognitionLanguageSelector />\n        </div>\n        &nbsp;\n        <div className=\"form-group-inline\">\n          <SpeechRecognitionTextNormalizationSelector />\n        </div>\n        &nbsp;\n        <div className=\"btn-group\">\n          <button\n            className=\"btn btn-secondary\"\n            disabled={!started}\n            onClick={dispatchStopSpeechRecognition}\n            type=\"button\"\n          >\n            Stop\n          </button>\n          <button\n            className=\"btn btn-secondary\"\n            disabled={!started}\n            onClick={dispatchAbortSpeechRecognition}\n            type=\"button\"\n          >\n            Abort\n          </button>\n        </div>\n        &nbsp;\n        <button className=\"btn btn-danger\" disabled={empty} onClick={dispatchClearSpeechRecognitionEvent} type=\"button\">\n          Clear events\n        </button>\n      </div>\n      <div className=\"row\" style={{ marginBottom: '1em' }}>\n        <div className=\"col\">\n          <label>Phrases</label>\n          <input\n            aria-label=\"Phrases for recognition\"\n            className=\"form-control\"\n            disabled={started || !ponyfillCapabilities.dynamicPhrases}\n            onBlur={() =>\n              dispatchSetSpeechRecognitionPhrases(\n                phrasesString\n                  .split(/[,;|]/gu)\n                  .map(value => value.trim())\n                  .filter(value => value)\n              )\n            }\n            onChange={({ target: { value } }) => setPhrasesString(value)}\n            type=\"text\"\n            value={phrasesString}\n          />\n        </div>\n        <div className=\"col\">\n          <label>Reference grammars</label>\n          <input\n            aria-label=\"Reference grammars for recognition\"\n            className=\"form-control\"\n            disabled={started || !ponyfillCapabilities.referenceGrammarId}\n            onBlur={() =>\n              dispatchSetSpeechRecognitionReferenceGrammars(\n                referenceGrammarsString\n                  .split(/[,;|]/gu)\n                  .map(value => value.trim())\n                  .filter(value => value)\n              )\n            }\n            onChange={({ target: { value } }) => setReferenceGrammarsString(value)}\n            type=\"text\"\n            value={referenceGrammarsString}\n          />\n        </div>\n        <div className=\"col\">\n          <label>Endpoint ID</label>\n          <SpeechRecognitionEndpointIdInput />\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default SpeechRecognitionCommands;\n","import { css } from 'glamor';\nimport React, { useCallback, useEffect, useRef } from 'react';\n\nconst ROOT_CSS = css({\n  backgroundColor: 'Transparent',\n  border: 0,\n  padding: 0\n});\n\nconst Popover = ({ children, content, placement, trigger }) => {\n  const createContentElement = useCallback(() => {\n    const element = document.createElement('pre');\n\n    element.innerText = content;\n\n    return element;\n  }, [content]);\n\n  const ref = useRef();\n  const { current } = ref;\n\n  useEffect(() => {\n    window.jQuery(current).popover({\n      content: createContentElement(content),\n      html: true\n    });\n\n    return () => window.jQuery(current).popover('dispose');\n  }, [content, createContentElement, current]);\n\n  return (\n    <button\n      className={ROOT_CSS}\n      data-placement={placement}\n      data-toggle=\"popover\"\n      data-trigger={trigger}\n      ref={ref}\n      type=\"button\"\n    >\n      {children}\n    </button>\n  );\n};\n\nexport default Popover;\n","/*eslint no-magic-numbers: [\"error\", { \"ignore\": [1, 2, 100] }]*/\n\nimport { useSelector } from 'react-redux';\nimport React from 'react';\n\nimport Popover from '../Bootstrap/Popover';\n\nconst SpeechRecognitionSimpleEvents = () => {\n  const speechRecognitionEvents = useSelector(({ speechRecognitionEvents }) => speechRecognitionEvents);\n\n  return (\n    <ol className=\"list-unstyled\">\n      {speechRecognitionEvents.map((event, index) => (\n        <li key={index}>\n          <span className=\"badge\">{index + 1}</span>&nbsp;\n          <Popover content={JSON.stringify(event, null, 2)} placement=\"right\" trigger=\"focus\">\n            {event.type === 'start' || event.type === 'end' ? (\n              <span className=\"badge badge-primary\">{event.type}</span>\n            ) : event.type === 'audiostart' || event.type === 'audioend' ? (\n              <span className=\"badge badge-success\">{event.type}</span>\n            ) : event.type === 'soundstart' || event.type === 'soundend' ? (\n              <span className=\"badge badge-warning\">{event.type}</span>\n            ) : event.type === 'speechstart' || event.type === 'speechend' ? (\n              <span className=\"badge badge-danger\">{event.type}</span>\n            ) : event.type === 'result' ? (\n              <span>\n                <span className=\"badge badge-info\">{event.type}</span>\n                <span>\n                  &nbsp;\n                  {[].map.call(event.results, (result, index) => (\n                    <React.Fragment key={index}>\n                      <div style={{ display: 'inline-block' }}>\n                        {!!result.isFinal && (\n                          <React.Fragment>\n                            <span className=\"badge badge-dark\">isFinal</span>&nbsp;\n                          </React.Fragment>\n                        )}\n                        {[].map.call(result, ({ confidence, transcript }, index) => (\n                          <React.Fragment key={index}>\n                            <span className=\"badge badge-pill badge-primary\">{transcript}</span>\n                            &nbsp;\n                            <span className=\"badge badge-pill badge-success\" key={index}>\n                              {Math.round(confidence * 100)}%\n                            </span>\n                            <br />\n                          </React.Fragment>\n                        ))}\n                      </div>\n                      &nbsp;\n                    </React.Fragment>\n                  ))}\n                </span>\n              </span>\n            ) : event.type === 'nomatch' ? (\n              <span className=\"badge badge-info\">{event.type}</span>\n            ) : event.type === 'error' ? (\n              <React.Fragment>\n                <span className=\"badge badge-dark\">{event.type}</span>&nbsp;\n                <small>{event.message}</small>\n              </React.Fragment>\n            ) : event.type === 'cognitiveservices' ? (\n              <span className=\"badge badge-light\">\n                {event.type}:{event.data.type}\n              </span>\n            ) : (\n              <span className=\"badge badge-secondary\">{event.type}</span>\n            )}\n          </Popover>\n        </li>\n      ))}\n    </ol>\n  );\n};\n\nexport default SpeechRecognitionSimpleEvents;\n","import React from 'react';\n\nimport SpeechRecognitionCommands from './UI/SpeechRecognitionCommands';\nimport SpeechRecognitionEvents from './UI/SpeechRecognitionSimpleEvents';\n\nexport default () => (\n  <div>\n    <div className=\"row\">\n      <div className=\"col\">\n        <SpeechRecognitionCommands />\n      </div>\n    </div>\n    <div className=\"row\">\n      <div className=\"col\">\n        <SpeechRecognitionEvents />\n      </div>\n    </div>\n  </div>\n);\n","const CANCEL_SPEECH_SYNTHESIS = 'CANCEL_SPEECH_SYNTHESIS';\n\nexport default function cancelSpeechSynthesis() {\n  return { type: CANCEL_SPEECH_SYNTHESIS };\n}\n\nexport { CANCEL_SPEECH_SYNTHESIS };\n","const CLEAR_SPEECH_SYNTHESIS_UTTERANCE = 'CLEAR_SPEECH_SYNTHESIS_UTTERANCE';\n\nexport default function clearSpeechSynthesisUtterance() {\n  return {\n    type: CLEAR_SPEECH_SYNTHESIS_UTTERANCE\n  };\n}\n\nexport { CLEAR_SPEECH_SYNTHESIS_UTTERANCE };\n","const PAUSE_SPEECH_SYNTHESIS = 'PAUSE_SPEECH_SYNTHESIS';\n\nexport default function pauseSpeechSynthesis() {\n  return { type: PAUSE_SPEECH_SYNTHESIS };\n}\n\nexport { PAUSE_SPEECH_SYNTHESIS };\n","const RESUME_SPEECH_SYNTHESIS = 'RESUME_SPEECH_SYNTHESIS';\n\nexport default function resumeSpeechSynthesis() {\n  return { type: RESUME_SPEECH_SYNTHESIS };\n}\n\nexport { RESUME_SPEECH_SYNTHESIS };\n","const SPEECH_SYNTHESIS_SPEAK_UTTERANCE = 'SPEECH_SYNTHESIS_SPEAK_UTTERANCE';\n\nexport default function speechSynthesisSpeakUtterance(utterance) {\n  return {\n    type: SPEECH_SYNTHESIS_SPEAK_UTTERANCE,\n    payload: { utterance }\n  };\n}\n\nexport { SPEECH_SYNTHESIS_SPEAK_UTTERANCE };\n","/*eslint no-magic-numbers: [\"error\", { \"ignore\": [300] }]*/\n\nimport React, { useState } from 'react';\n\nimport useInterval from '../useInterval';\n\nconst MonitoringComponent = ({ children, getValue, interval }) => {\n  const [result, setResult] = useState();\n\n  useInterval(\n    () => {\n      const nextResult = getValue();\n\n      result !== nextResult && setResult(nextResult);\n    },\n    interval || 300,\n    [getValue, result]\n  );\n\n  return <React.Fragment key={result}>{typeof children === 'function' ? children(result) : children}</React.Fragment>;\n};\n\nexport default MonitoringComponent;\n","import { useEffect } from 'react';\n\nexport default function useInterval(fn, interval, deps = []) {\n  useEffect(() => {\n    const timer = setInterval(fn, interval);\n\n    return () => clearInterval(timer);\n  }, [fn, interval, ...deps]);\n}\n","import { useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\n\nimport MonitoringComponent from './MonitoringComponent';\n\nconst MonitoredSpeakingProperty = () => {\n  const speechSynthesis = useSelector(({ ponyfill: { speechSynthesis } }) => speechSynthesis);\n  const getValue = useCallback(() => speechSynthesis && speechSynthesis.speaking, [speechSynthesis]);\n\n  return (\n    <MonitoringComponent getValue={getValue} interval={300}>\n      {result => (\n        <span>\n          Speaking&nbsp;\n          <span\n            className={classNames('badge', {\n              'badge-success': result,\n              'badge-secondary': !result\n            })}\n          >\n            {result ? 'true' : 'false'}\n          </span>\n        </span>\n      )}\n    </MonitoringComponent>\n  );\n};\n\nexport default MonitoredSpeakingProperty;\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport cancelSpeechSynthesis from '../data/actions/cancelSpeechSynthesis';\nimport clearSpeechSynthesisUtterance from '../data/actions/clearSpeechSynthesisUtterance';\nimport pauseSpeechSynthesisUtterance from '../data/actions/pauseSpeechSynthesis';\nimport resumeSpeechSynthesisUtterance from '../data/actions/resumeSpeechSynthesis';\nimport speechSynthesisSpeakUtterance from '../data/actions/speechSynthesisSpeakUtterance';\n\nimport SpeechSynthesisSpeakingProperty from './SpeechSynthesisSpeakingProperty';\n\nconst SpeechSynthesisCommands = () => {\n  const { hasUtterances, text, voiceURI } = useSelector(\n    ({ speechSynthesisUtterances, speechSynthesisText, speechSynthesisVoiceURI }) => ({\n      hasUtterances: speechSynthesisUtterances.length,\n      text: speechSynthesisText,\n      voiceURI: speechSynthesisVoiceURI\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchCancelSpeechSynthesis = useCallback(() => dispatch(cancelSpeechSynthesis()), [dispatch]);\n  const dispatchClearSpeechSynthesisUtterance = useCallback(() => dispatch(clearSpeechSynthesisUtterance()), [\n    dispatch\n  ]);\n\n  const dispatchPauseSpeechSynthesisUtterance = useCallback(() => dispatch(pauseSpeechSynthesisUtterance()), [\n    dispatch\n  ]);\n\n  const dispatchResumeSpeechSynthesisUtterance = useCallback(() => dispatch(resumeSpeechSynthesisUtterance()), [\n    dispatch\n  ]);\n\n  const dispatchSpeechSynthesisSpeakUtterance = useCallback(\n    () => dispatch(speechSynthesisSpeakUtterance({ text, voiceURI })),\n    [dispatch, text, voiceURI]\n  );\n\n  return (\n    <div>\n      <button\n        className=\"btn btn-primary\"\n        disabled={!text}\n        onClick={dispatchSpeechSynthesisSpeakUtterance}\n        type=\"button\"\n      >\n        Speak\n      </button>\n      &nbsp;\n      <div aria-label=\"Pause or resume\" className=\"btn-group\" role=\"group\">\n        <button\n          className=\"btn btn-primary\"\n          disabled={!text}\n          onClick={dispatchPauseSpeechSynthesisUtterance}\n          type=\"button\"\n        >\n          Pause\n        </button>\n        <button\n          className=\"btn btn-primary\"\n          disabled={!text}\n          onClick={dispatchResumeSpeechSynthesisUtterance}\n          type=\"button\"\n        >\n          Resume\n        </button>\n      </div>\n      &nbsp;\n      <button className=\"btn btn-primary\" disabled={!text} onClick={dispatchCancelSpeechSynthesis} type=\"button\">\n        Cancel\n      </button>\n      &nbsp;\n      <button\n        className=\"btn btn-danger\"\n        disabled={!hasUtterances}\n        onClick={dispatchClearSpeechSynthesisUtterance}\n        type=\"button\"\n      >\n        Clear utterances\n      </button>\n      &nbsp;\n      <SpeechSynthesisSpeakingProperty />\n    </div>\n  );\n};\n\nexport default SpeechSynthesisCommands;\n","const SET_SPEECH_SYNTHESIS_DEPLOYMENT_ID = 'SET_SPEECH_SYNTHESIS_DEPLOYMENT_ID';\n\nexport default function setSpeechSynthesisDeploymentId(deploymentId) {\n  return {\n    type: SET_SPEECH_SYNTHESIS_DEPLOYMENT_ID,\n    payload: { deploymentId }\n  };\n}\n\nexport { SET_SPEECH_SYNTHESIS_DEPLOYMENT_ID };\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport getPonyfillCapabilities from '../getPonyfillCapabilities';\nimport setSpeechSynthesisDeploymentId from '../data/actions/setSpeechSynthesisDeploymentId';\n\nconst SpeechSynthesisDeploymentIdInput = () => {\n  const { ponyfillType, speechSynthesisDeploymentId } = useSelector(\n    ({ ponyfillType, speechSynthesisDeploymentId }) => ({\n      ponyfillType,\n      speechSynthesisDeploymentId\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchSetSpeechSynthesisDeploymentId = useCallback(\n    ({ target: { value } }) => dispatch(setSpeechSynthesisDeploymentId(value)),\n    [dispatch]\n  );\n  const ponyfillCapabilities = getPonyfillCapabilities(ponyfillType);\n\n  return (\n    <input\n      className=\"form-control\"\n      disabled={!ponyfillCapabilities.customVoice}\n      onChange={dispatchSetSpeechSynthesisDeploymentId}\n      type=\"text\"\n      value={speechSynthesisDeploymentId}\n    />\n  );\n};\n\nexport default SpeechSynthesisDeploymentIdInput;\n","const SET_SPEECH_SYNTHESIS_OUTPUT_FORMAT = 'SET_SPEECH_SYNTHESIS_OUTPUT_FORMAT';\n\nexport default function setSpeechSynthesisOutputFormat(outputFormat) {\n  return {\n    type: SET_SPEECH_SYNTHESIS_OUTPUT_FORMAT,\n    payload: { outputFormat }\n  };\n}\n\nexport { SET_SPEECH_SYNTHESIS_OUTPUT_FORMAT };\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport getPonyfillCapabilities from '../getPonyfillCapabilities';\nimport Select, { Option } from '../Bootstrap/Select';\nimport setSpeechSynthesisOutputFormat from '../data/actions/setSpeechSynthesisOutputFormat';\n\nconst SpeechSynthesisOutputFormatSelector = () => {\n  const { ponyfillType, speechSynthesisOutputFormat } = useSelector(\n    ({ ponyfillType, speechSynthesisOutputFormat }) => ({\n      ponyfillType,\n      speechSynthesisOutputFormat\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchSetSpeechSynthesisOutputFormat = useCallback(value => dispatch(setSpeechSynthesisOutputFormat(value)), [\n    dispatch\n  ]);\n\n  const ponyfillCapabilities = getPonyfillCapabilities(ponyfillType);\n\n  return (\n    <Select\n      disabled={!ponyfillCapabilities.speechServices}\n      onChange={dispatchSetSpeechSynthesisOutputFormat}\n      value={speechSynthesisOutputFormat}\n    >\n      <Option text=\"MP3 160Kbps 24KHz\" value=\"audio-24khz-160kbitrate-mono-mp3\" />\n      <Option text=\"MP3 128Kbps 16KHz\" value=\"audio-16khz-128kbitrate-mono-mp3\" />\n      <Option text=\"MP3 96Kbps 24KHz\" value=\"audio-24khz-96kbitrate-mono-mp3\" />\n      <Option text=\"MP3 64Kbps 16KHz\" value=\"audio-16khz-64kbitrate-mono-mp3\" />\n      <Option text=\"MP3 48Kbps 24KHz\" value=\"audio-24khz-48kbitrate-mono-mp3\" />\n      <Option text=\"MP3 32Kbps 16KHz\" value=\"audio-16khz-32kbitrate-mono-mp3\" />\n      <Option text=\"WAV 24KHz 16-bit PCM\" value=\"riff-24khz-16bit-mono-pcm\" />\n      <Option text=\"WAV 16KHz 16-bit PCM\" value=\"riff-16khz-16bit-mono-pcm\" />\n      <Option text=\"WAV 8KHz 8-bit a-law\" value=\"riff-8khz-8bit-mono-alaw\" />\n      <Option text=\"WAV 8KHz 8-bit &#x03BC;-law\" value=\"riff-8khz-8bit-mono-mulaw\" />\n    </Select>\n  );\n};\n\nexport default SpeechSynthesisOutputFormatSelector;\n","const SET_SPEECH_SYNTHESIS_TEXT = 'SET_SPEECH_SYNTHESIS_TEXT';\n\nexport default function setSpeechSynthesisText(text) {\n  return {\n    type: SET_SPEECH_SYNTHESIS_TEXT,\n    payload: { text }\n  };\n}\n\nexport { SET_SPEECH_SYNTHESIS_TEXT };\n","const SET_SPEECH_SYNTHESIS_VOICE_URI = 'SET_SPEECH_SYNTHESIS_VOICE_URI';\n\nexport default function setSpeechSynthesisVoiceURI(voiceURI) {\n  return {\n    type: SET_SPEECH_SYNTHESIS_VOICE_URI,\n    payload: {\n      voiceURI\n    }\n  };\n}\n\nexport { SET_SPEECH_SYNTHESIS_VOICE_URI };\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport setSpeechSynthesisText from '../data/actions/setSpeechSynthesisText';\nimport setSpeechSynthesisVoiceURI from '../data/actions/setSpeechSynthesisVoiceURI';\n\nconst SpeechSynthesisTextBox = () => {\n  const { speechSynthesisNativeVoices, speechSynthesisText } = useSelector(\n    ({ speechSynthesisNativeVoices, speechSynthesisText }) => ({\n      speechSynthesisNativeVoices,\n      speechSynthesisText\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchSetSpeechSynthesisText = useCallback(value => dispatch(setSpeechSynthesisText(value)), [dispatch]);\n\n  const dispatchSetSpeechSynthesisVoice = useCallback(\n    patterns => {\n      patterns.some(pattern => {\n        const voice = speechSynthesisNativeVoices.find(({ name }) => ~name.indexOf(pattern));\n\n        voice && dispatch(setSpeechSynthesisVoiceURI(voice.voiceURI));\n\n        return voice;\n      });\n    },\n    [dispatch, speechSynthesisNativeVoices]\n  );\n\n  const handleCantoneseClick = useCallback(() => {\n    dispatchSetSpeechSynthesisText(\n      '一天，悶悶不樂的愛麗絲跟姊姊同坐於河畔。忽見一隻古怪的白兔走過──牠穿戴打扮，手持懷錶，自言自語，行色匆匆。好奇的愛麗絲跟着牠跑，跳進兔子洞裏去。'\n    );\n    dispatchSetSpeechSynthesisVoice(['TracyRUS']);\n  }, [dispatchSetSpeechSynthesisText, dispatchSetSpeechSynthesisVoice]);\n\n  const handleEnglishClick = useCallback(() => {\n    dispatchSetSpeechSynthesisText(\n      'Pooh is very social. After Christopher Robin, his closest friend is Piglet, and he most often chooses to spend his time with one or both of them.'\n    );\n    dispatchSetSpeechSynthesisVoice(['JessaNeural', 'Jessa24kRUS', 'JessaRUS']);\n  }, [dispatchSetSpeechSynthesisText, dispatchSetSpeechSynthesisVoice]);\n\n  const handleEnglishSSMLClick = useCallback(() => {\n    dispatchSetSpeechSynthesisText(\n      '<speak version=\"1.0\" xml:lang=\"en-US\"><voice xml:lang=\"en-US\" name=\"Microsoft Server Speech Text to Speech Voice (en-US, Guy24kRUS)\"><prosody pitch=\"+20%\" rate=\"+20%\" volume=\"0%\">Pooh is very social. After Christopher Robin, his closest friend is Piglet, and he most often chooses to spend his time with one or both of them.</prosody></voice></speak>'\n    );\n  }, [dispatchSetSpeechSynthesisText]);\n\n  const handleTextChange = useCallback(({ target: { value } }) => dispatchSetSpeechSynthesisText(value), [\n    dispatchSetSpeechSynthesisText\n  ]);\n\n  return (\n    <div className=\"input-group\">\n      <div className=\"input-group-prepend\">\n        <button\n          aria-expanded=\"false\"\n          aria-haspopup=\"true\"\n          className=\"btn btn-outline-secondary dropdown-toggle\"\n          data-toggle=\"dropdown\"\n          type=\"button\"\n        >\n          Preset\n        </button>\n        <div className=\"dropdown-menu\">\n          <button className=\"dropdown-item\" onClick={handleEnglishClick} type=\"button\">\n            Winnie the Pooh (English)\n          </button>\n          <button className=\"dropdown-item\" onClick={handleEnglishSSMLClick} type=\"button\">\n            Winnie the Pooh (English in SSML)\n          </button>\n          <button className=\"dropdown-item\" onClick={handleCantoneseClick} type=\"button\">\n            Alice Adventures in Wonderland (Cantonese)\n          </button>\n        </div>\n      </div>\n      <input\n        aria-label=\"Text to synthesis as speech\"\n        className=\"form-control\"\n        onChange={handleTextChange}\n        type=\"text\"\n        value={speechSynthesisText}\n      />\n    </div>\n  );\n};\n\nexport default SpeechSynthesisTextBox;\n","import { useSelector } from 'react-redux';\nimport React, { useMemo } from 'react';\n\nconst SpeechSynthesisUtteranceEvent = ({ utteranceID }) => {\n  const speechSynthesisUtterances = useSelector(({ speechSynthesisUtterances }) => speechSynthesisUtterances);\n  const events = useMemo(() => (speechSynthesisUtterances.find(({ id }) => id === utteranceID) || {}).events || [], [\n    speechSynthesisUtterances,\n    utteranceID\n  ]);\n\n  return (\n    <div>\n      {events.map((event, index) => (\n        <React.Fragment key={index}>\n          {event.type === 'start' || event.type === 'end' ? (\n            <span className=\"badge badge-success\">{event.type}</span>\n          ) : event.type === 'boundary' ? (\n            <span className=\"badge badge-primary\">{event.type}</span>\n          ) : (\n            <span className=\"badge badge-secondary\">{event.type}</span>\n          )}\n          &nbsp;\n        </React.Fragment>\n      ))}\n    </div>\n  );\n};\n\nexport default SpeechSynthesisUtteranceEvent;\n","import { useSelector } from 'react-redux';\nimport React from 'react';\n\nimport SpeechSynthesisUtteranceEvents from './SpeechSynthesisUtteranceEvents';\n\nconst SpeechSynthesisUtterances = () => {\n  const speechSynthesisUtterances = useSelector(({ speechSynthesisUtterances }) => speechSynthesisUtterances);\n\n  return (\n    <div className=\"list-group\">\n      {speechSynthesisUtterances.map(utterance => (\n        <div className=\"list-group-item\" key={utterance.id}>\n          <div>{utterance.text}</div>\n          <SpeechSynthesisUtteranceEvents utteranceID={utterance.id} />\n        </div>\n      ))}\n      <br />\n    </div>\n  );\n};\n\nexport default SpeechSynthesisUtterances;\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport setSpeechSynthesisVoiceURI from '../data/actions/setSpeechSynthesisVoiceURI';\nimport Select, { Option } from '../Bootstrap/Select';\n\nconst SPEAK_TAG_PATTERN = /^\\s*<speak[\\s>]/u;\nconst XML_PROLOG_PATTERN = /^\\s*<?xml\\s/u;\n\nfunction isSSML(text) {\n  return SPEAK_TAG_PATTERN.test(text) || XML_PROLOG_PATTERN.test(text);\n}\n\nconst SpeechSynthesisVoiceSelector = () => {\n  const { speechSynthesisNativeVoices, speechSynthesisText, speechSynthesisVoiceURI } = useSelector(\n    ({ speechSynthesisNativeVoices, speechSynthesisText, speechSynthesisVoiceURI }) => ({\n      speechSynthesisNativeVoices,\n      speechSynthesisText,\n      speechSynthesisVoiceURI\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchSetSpeechSynthesisVoiceURI = useCallback(value => dispatch(setSpeechSynthesisVoiceURI(value)), [\n    dispatch\n  ]);\n\n  return (\n    <Select\n      disabled={isSSML(speechSynthesisText) || !speechSynthesisNativeVoices.length}\n      onChange={dispatchSetSpeechSynthesisVoiceURI}\n      value={speechSynthesisVoiceURI || ''}\n    >\n      {speechSynthesisNativeVoices.map(({ name, voiceURI }) => (\n        <Option key={voiceURI} text={name} value={voiceURI} />\n      ))}\n    </Select>\n  );\n};\n\nexport default SpeechSynthesisVoiceSelector;\n","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useCallback } from 'react';\n\nimport getPonyfillCapabilities from '../getPonyfillCapabilities';\nimport setSpeechSynthesisVoiceURI from '../data/actions/setSpeechSynthesisVoiceURI';\n\nconst SpeechSynthesisVoiceURIInput = () => {\n  const { ponyfillType, speechSynthesisDeploymentId, speechSynthesisVoiceURI } = useSelector(\n    ({ ponyfillType, speechSynthesisDeploymentId, speechSynthesisVoiceURI }) => ({\n      ponyfillType,\n      speechSynthesisDeploymentId,\n      speechSynthesisVoiceURI\n    })\n  );\n\n  const dispatch = useDispatch();\n  const dispatchSetSpeechSynthesisvoiceURI = useCallback(\n    ({ target: { value } }) => dispatch(setSpeechSynthesisVoiceURI(value)),\n    [dispatch]\n  );\n\n  const ponyfillCapabilities = getPonyfillCapabilities(ponyfillType);\n\n  return (\n    <input\n      className=\"form-control\"\n      disabled={!ponyfillCapabilities.customVoice || !speechSynthesisDeploymentId}\n      onChange={dispatchSetSpeechSynthesisvoiceURI}\n      type=\"text\"\n      value={speechSynthesisVoiceURI}\n    />\n  );\n};\n\nexport default SpeechSynthesisVoiceURIInput;\n","import { useSelector } from 'react-redux';\nimport React from 'react';\n\nimport SpeechSynthesisCommands from './UI/SpeechSynthesisCommands';\nimport SpeechSynthesisDeploymentIdInput from './UI/SpeechSynthesisDeploymentIdInput';\nimport SpeechSynthesisOutputFormatSelector from './UI/SpeechSynthesisOutputFormatSelector';\nimport SpeechSynthesisTextBox from './UI/SpeechSynthesisTextBox';\nimport SpeechSynthesisUtterances from './UI/SpeechSynthesisUtterances';\nimport SpeechSynthesisVoiceSelector from './UI/SpeechSynthesisVoiceSelector';\nimport SpeechSynthesisVoiceURIInput from './UI/SpeechSynthesisVoiceURIInput';\n\nconst SpeechSynthesisProvingGround = () => {\n  const hasVoices = useSelector(({ speechSynthesisNativeVoices }) => !!speechSynthesisNativeVoices.length);\n\n  return (\n    <div>\n      <form>\n        <div className=\"row\">\n          <div className=\"col\">\n            <label>Text to synthesis</label>\n            <SpeechSynthesisTextBox />\n          </div>\n        </div>\n        <br />\n        <div className=\"row\">\n          <div className=\"col\">\n            <label>Deployment ID</label>\n            <SpeechSynthesisDeploymentIdInput />\n          </div>\n        </div>\n        <br />\n        <div className=\"row\">\n          <div className=\"col col-md-9\">\n            {hasVoices ? (\n              <React.Fragment>\n                <label>Voice</label>\n                <SpeechSynthesisVoiceSelector />\n              </React.Fragment>\n            ) : (\n              <React.Fragment>\n                <label>Voice URI</label>\n                <SpeechSynthesisVoiceURIInput />\n              </React.Fragment>\n            )}\n          </div>\n          <div className=\"col col-md-3\">\n            <label>Output format</label>\n            <SpeechSynthesisOutputFormatSelector />\n          </div>\n        </div>\n      </form>\n      <br />\n      <div className=\"row\">\n        <div className=\"col\">\n          <SpeechSynthesisCommands />\n        </div>\n      </div>\n      <br />\n      <div className=\"row\">\n        <div className=\"col\">\n          <SpeechSynthesisUtterances />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SpeechSynthesisProvingGround;\n","const SET_NAV_PANE = 'SET_NAV_PANE';\n\nexport default function setNavPane(navPane) {\n  if (navPane !== 'speech synthesis') {\n    navPane = 'speech recognition';\n  }\n\n  return {\n    type: SET_NAV_PANE,\n    payload: { navPane }\n  };\n}\n\nexport { SET_NAV_PANE };\n","import { css } from 'glamor';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\n\nimport GitHubForkMe from './GitHubForkMe';\n\nimport PonyfillSelector from './UI/PonyfillSelector';\nimport RegionSelector from './UI/RegionSelector';\nimport SubscriptionKeyInput from './UI/SubscriptionKeyInput';\nimport SpeechRecognitionProvingGround from './SpeechRecognitionProvingGround2';\nimport SpeechSynthesisProvingGround from './SpeechSynthesisProvingGround';\n\nimport setNavPane from './data/actions/setNavPane';\n\n// Patching Bootstrap\ncss.global('button.nav-link', { backgroundColor: 'Transparent' });\n\nconst App = () => {\n  const { authorizationToken, navPane, ponyfill, ponyfillType } = useSelector(\n    ({ authorizationToken, navPane, ponyfill, ponyfillType }) => ({\n      authorizationToken,\n      navPane,\n      ponyfill,\n      ponyfillType\n    })\n  );\n\n  const dispatch = useDispatch();\n\n  const dispatchSetNavPaneToSpeechRecognition = useCallback(\n    event => {\n      event.preventDefault();\n\n      dispatch(setNavPane('speech recognition'));\n    },\n    [dispatch]\n  );\n\n  const dispatchSetNavPaneToSpeechSynthesis = useCallback(\n    event => {\n      event.preventDefault();\n\n      dispatch(setNavPane('speech synthesis'));\n    },\n    [dispatch]\n  );\n\n  return (\n    <div>\n      <div className=\"jumbotron\">\n        <h1 className=\"display-4\">web-speech-cognitive-services</h1>\n        <p className=\"lead\">Ponyfills for Web Speech API using Cognitive Services Speech Services</p>\n      </div>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col\">\n            <form>\n              <div className=\"row\">\n                <div className=\"form-group col-sm-3\">\n                  <label>API provider</label>\n                  <PonyfillSelector />\n                </div>\n                <div className=\"form-group col-sm-2\">\n                  <label>Region</label>\n                  <RegionSelector />\n                </div>\n                <div className=\"form-group col\">\n                  <label>{authorizationToken ? 'Authorization token' : 'Subscription key'}</label>\n                  <SubscriptionKeyInput />\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">\n            <ul className=\"nav nav-tabs\">\n              <li className=\"nav-item\">\n                <button\n                  className={classNames('nav-link', { active: navPane === 'speech recognition' })}\n                  onClick={dispatchSetNavPaneToSpeechRecognition}\n                  type=\"button\"\n                >\n                  Speech recognition\n                </button>\n              </li>\n              <li className=\"nav-item\">\n                <button\n                  className={classNames('nav-link', { active: navPane === 'speech synthesis' })}\n                  onClick={dispatchSetNavPaneToSpeechSynthesis}\n                  type=\"button\"\n                >\n                  Speech synthesis\n                </button>\n              </li>\n            </ul>\n            <br />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">\n            {!!ponyfill &&\n              (navPane === 'speech synthesis' ? (\n                <SpeechSynthesisProvingGround key={ponyfillType} ponyfill={ponyfill} />\n              ) : (\n                <SpeechRecognitionProvingGround key={ponyfillType} ponyfill={ponyfill} />\n              ))}\n          </div>\n        </div>\n        <GitHubForkMe owner=\"compulim\" repo=\"web-speech-cognitive-services\" />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","const SET_PONYFILL = 'SET_PONYFILL';\n\nexport default function setPonyfill(ponyfill) {\n  return {\n    type: SET_PONYFILL,\n    payload: { ponyfill }\n  };\n}\n\nexport { SET_PONYFILL };\n","const ADD_SPEECH_RECOGNITION_EVENT = 'ADD_SPEECH_RECOGNITION_EVENT';\n\nfunction serializeEvent(from, ...keys) {\n  const to = { type: from.type };\n\n  keys.forEach(key => {\n    to[key] = from[key];\n  });\n\n  return to;\n}\n\nexport default function addSpeechRecognitionEvent(event) {\n  let serializedEvent;\n\n  switch (event.type) {\n    // case 'boundary':\n    // case 'end':\n    // case 'mark':\n    // case 'pause':\n    // case 'resume':\n    // case 'start':\n    //   serializedEvent = copyEvent(\n    //     event,\n    //     'charIndex',\n    //     'elapsedTime',\n    //     'name',\n    //     'utterance'\n    //   );\n    //   break;\n\n    case 'error':\n      serializedEvent = serializeEvent(event, 'error', 'message');\n      break;\n\n    case 'nomatch':\n    case 'result':\n      serializedEvent = serializeEvent(event, 'emma', 'interpretation', 'resultIndex');\n      serializedEvent.results = {\n        length: event.results.length\n      };\n\n      serializedEvent.results = [].reduce.call(\n        event.results,\n        (serializedResults, result, index) => {\n          serializedResults[index] = [].reduce.call(\n            result,\n            (serializedResult, { confidence, transcript }, index) => {\n              serializedResult[index] = { confidence, transcript };\n\n              return serializedResult;\n            },\n            {\n              isFinal: result.isFinal,\n              length: result.length\n            }\n          );\n\n          return serializedResults;\n        },\n        {\n          length: event.results.length\n        }\n      );\n\n      [].forEach.call(event.results, (result, index) => {\n        const serializedResult = (serializedEvent.results[index] = {\n          isFinal: result.isFinal,\n          length: result.length\n        });\n\n        [].forEach.call(result, (alt, index) => {\n          serializedResult[index] = {\n            confidence: alt.confidence,\n            transcript: alt.transcript\n          };\n        });\n      });\n\n      break;\n\n    case 'cognitiveservices':\n      serializedEvent = { data: event.data, type: 'cognitiveservices' };\n      break;\n\n    default:\n      serializedEvent = serializeEvent(event);\n      break;\n  }\n\n  return {\n    type: ADD_SPEECH_RECOGNITION_EVENT,\n    payload: { event: serializedEvent }\n  };\n}\n\nexport { ADD_SPEECH_RECOGNITION_EVENT };\n","const SET_SPEECH_SYNTHESIS_NATIVE_VOICES = 'SET_SPEECH_SYNTHESIS_NATIVE_VOICES';\n\nexport default function setSpeechSynthesisNativeVoices(voices) {\n  return {\n    type: SET_SPEECH_SYNTHESIS_NATIVE_VOICES,\n    payload: { voices }\n  };\n}\n\nexport { SET_SPEECH_SYNTHESIS_NATIVE_VOICES };\n","const ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE = 'ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE';\n\nexport default function addSpeechSynthesisNativeUtterance(nativeUtterance) {\n  return {\n    type: ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE,\n    payload: { nativeUtterance }\n  };\n}\n\nexport { ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE };\n","const ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE_EVENT = 'ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE_EVENT';\n\nexport default function addSpeechSynthesisNativeUtteranceEvent(utteranceID, event) {\n  return {\n    type: ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE_EVENT,\n    payload: {\n      event,\n      utteranceID\n    }\n  };\n}\n\nexport { ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE_EVENT };\n","import updateIn from 'simple-update-in';\n\nimport { ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE } from '../actions/addSpeechSynthesisNativeUtterance';\nimport { ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE_EVENT } from '../actions/addSpeechSynthesisNativeUtteranceEvent';\nimport { CLEAR_SPEECH_SYNTHESIS_UTTERANCE } from '../actions/clearSpeechSynthesisUtterance';\n\nfunction serializeEvent({ charIndex, elapsedTime, name, type }) {\n  return {\n    charIndex,\n    elapsedTime,\n    name,\n    type\n  };\n}\n\nexport default function speechSynthesisUtterances(state = [], { payload, type }) {\n  if (type === ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE) {\n    const {\n      nativeUtterance: { id, text, voice }\n    } = payload;\n\n    return [\n      ...state,\n      {\n        events: [],\n        id,\n        text,\n        voice: voice && {\n          name: voice.name,\n          voiceURI: voice.voiceURI\n        }\n      }\n    ];\n  } else if (type === ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE_EVENT) {\n    const { event, utteranceID } = payload;\n\n    return updateIn(state, [({ id }) => id === utteranceID, 'events'], events => [...events, serializeEvent(event)]);\n  } else if (type === CLEAR_SPEECH_SYNTHESIS_UTTERANCE) {\n    return [];\n  }\n\n  return state;\n}\n","import { combineReducers } from 'redux';\n\nimport browserSupportedSpeechRecognition from './reducers/browserSupportedSpeechRecognition';\nimport enableTelemetry from './reducers/enableTelemetry';\nimport navPane from './reducers/navPane';\nimport onDemandAuthorizationToken from './reducers/onDemandAuthorizationToken';\nimport ponyfill from './reducers/ponyfill';\nimport ponyfillType from './reducers/ponyfillType';\nimport region from './reducers/region';\nimport speechRecognitionContinuous from './reducers/speechRecognitionContinuous';\nimport speechRecognitionDelayedStart from './reducers/speechRecognitionDelayedStart';\nimport speechRecognitionEndpointId from './reducers/speechRecognitionEndpointId';\nimport speechRecognitionEvents from './reducers/speechRecognitionEvents';\nimport speechRecognitionInterimResults from './reducers/speechRecognitionInterimResults';\nimport speechRecognitionLanguage from './reducers/speechRecognitionLanguage';\nimport speechRecognitionMaxAlternatives from './reducers/speechRecognitionMaxAlternatives';\nimport speechRecognitionPhrases from './reducers/speechRecognitionPhrases';\nimport speechRecognitionReferenceGrammars from './reducers/speechRecognitionReferenceGrammars';\nimport speechRecognitionStarted from './reducers/speechRecognitionStarted';\nimport speechRecognitionTextNormalization from './reducers/speechRecognitionTextNormalization';\nimport speechServicesAuthorizationToken from './reducers/speechServicesAuthorizationToken';\nimport speechServicesSubscriptionKey from './reducers/speechServicesSubscriptionKey';\nimport speechSynthesisDeploymentId from './reducers/speechSynthesisDeploymentId';\nimport speechSynthesisNativeVoices from './reducers/speechSynthesisNativeVoices';\nimport speechSynthesisOutputFormat from './reducers/speechSynthesisOutputFormat';\nimport speechSynthesisText from './reducers/speechSynthesisText';\nimport speechSynthesisUtterances from './reducers/speechSynthesisUtterances';\nimport speechSynthesisVoiceURI from './reducers/speechSynthesisVoiceURI';\n\nexport default combineReducers({\n  browserSupportedSpeechRecognition,\n  enableTelemetry,\n  navPane,\n  onDemandAuthorizationToken,\n  ponyfill,\n  ponyfillType,\n  region,\n  speechRecognitionContinuous,\n  speechRecognitionDelayedStart,\n  speechRecognitionEndpointId,\n  speechRecognitionEvents,\n  speechRecognitionInterimResults,\n  speechRecognitionLanguage,\n  speechRecognitionMaxAlternatives,\n  speechRecognitionPhrases,\n  speechRecognitionReferenceGrammars,\n  speechRecognitionStarted,\n  speechRecognitionTextNormalization,\n  speechServicesAuthorizationToken,\n  speechServicesSubscriptionKey,\n  speechSynthesisDeploymentId,\n  speechSynthesisNativeVoices,\n  speechSynthesisOutputFormat,\n  speechSynthesisText,\n  speechSynthesisUtterances,\n  speechSynthesisVoiceURI\n});\n","export default function browserSupportedSpeechRecognition() {\n  return !!(window.SpeechRecognition || window.webkitSpeechRecognition);\n}\n","import { SET_ENABLE_TELEMETRY } from '../actions/setEnableTelemetry';\n\nexport default function enableTelemetry(state = true, { payload, type }) {\n  if (type === SET_ENABLE_TELEMETRY) {\n    return payload.enableTelemetry;\n  }\n\n  return state;\n}\n","import { SET_NAV_PANE } from '../actions/setNavPane';\n\nexport default function navPane(state = 'speech recognition', { payload, type }) {\n  if (type === SET_NAV_PANE) {\n    return payload.navPane;\n  }\n\n  return state;\n}\n","import { SET_ON_DEMAND_AUTHORIZATION_TOKEN } from '../actions/setOnDemandAuthorizationToken';\n\nexport default function onDemandAuthorizationToken(state = false, { payload, type }) {\n  if (type === SET_ON_DEMAND_AUTHORIZATION_TOKEN) {\n    if (typeof payload.onDemand === 'boolean') {\n      state = payload.onDemand;\n    } else {\n      state = !state;\n    }\n  }\n\n  return state;\n}\n","import { SET_PONYFILL } from '../actions/setPonyfill';\n\nexport default function ponyfill(state = null, { payload, type }) {\n  if (type === SET_PONYFILL) {\n    return payload.ponyfill;\n  }\n\n  return state;\n}\n","import { SET_PONYFILL_TYPE } from '../actions/setPonyfillType';\n\nexport default function ponyfillType(state = 'speechservices:npm', { payload, type }) {\n  if (type === SET_PONYFILL_TYPE) {\n    switch (payload.ponyfillType) {\n      case 'browser':\n        state = 'browser';\n        break;\n\n      case 'speechservices:bundle':\n        state = 'speechservices:bundle';\n        break;\n\n      default:\n        state = 'speechservices:npm';\n        break;\n    }\n  }\n\n  return state;\n}\n","import { SET_REGION } from '../actions/setRegion';\n\nexport default function region(state = 'westus', { payload, type }) {\n  if (type === SET_REGION) {\n    state = payload.region;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_RECOGNITION_CONTINUOUS } from '../actions/setSpeechRecognitionContinuous';\n\nexport default function speechRecognitionContinuous(state = false, { payload, type }) {\n  if (type === SET_SPEECH_RECOGNITION_CONTINUOUS) {\n    state = payload.continuous;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_RECOGNITION_DELAYED_START } from '../actions/setSpeechRecognitionDelayedStart';\n\nexport default function speechRecognitionDelayedStart(state = false, { payload, type }) {\n  if (type === SET_SPEECH_RECOGNITION_DELAYED_START) {\n    state = payload.delay;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_RECOGNITION_ENDPOINT_ID } from '../actions/setSpeechRecognitionEndpointId';\n\nexport default function speechRecognitionEndpointId(state = '', { payload, type }) {\n  if (type === SET_SPEECH_RECOGNITION_ENDPOINT_ID) {\n    state = payload.endpointId;\n  }\n\n  return state;\n}\n","import { ADD_SPEECH_RECOGNITION_EVENT } from '../actions/addSpeechRecognitionEvent';\nimport { CLEAR_SPEECH_RECOGNITION_EVENT } from '../actions/clearSpeechRecognitionEvent';\n\nexport default function speechRecognitionEvents(state = [], { payload, type }) {\n  switch (type) {\n    case ADD_SPEECH_RECOGNITION_EVENT:\n      return [...state, payload.event];\n\n    case CLEAR_SPEECH_RECOGNITION_EVENT:\n      return [];\n\n    default:\n      return state;\n  }\n}\n","import { SET_SPEECH_RECOGNITION_INTERIM_RESULTS } from '../actions/setSpeechRecognitionInterimResults';\n\nexport default function speechRecognitionInterimResults(state = false, { payload, type }) {\n  if (type === SET_SPEECH_RECOGNITION_INTERIM_RESULTS) {\n    state = payload.interimResults;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_RECOGNITION_LANGUAGE } from '../actions/setSpeechRecognitionLanguage';\n\nexport default function speechRecognitionLanguage(state = 'en-US', { payload, type }) {\n  switch (type) {\n    case SET_SPEECH_RECOGNITION_LANGUAGE:\n      return payload.language;\n\n    default:\n      return state;\n  }\n}\n","import { SET_SPEECH_RECOGNITION_MAX_ALTERNATIVES } from '../actions/setSpeechRecognitionMaxAlternatives';\n\nexport default function speechRecognitionMaxAlternatives(state = 1, { payload, type }) {\n  if (type === SET_SPEECH_RECOGNITION_MAX_ALTERNATIVES) {\n    return payload.maxAlternatives;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_RECOGNITION_PHRASES } from '../actions/setSpeechRecognitionPhrases';\n\nexport default function speechRecognitionPhrases(state = ['Bellevue', 'Redmond'], { payload, type }) {\n  if (type === SET_SPEECH_RECOGNITION_PHRASES) {\n    return payload.phrases;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_RECOGNITION_REFERENCE_GRAMMARS } from '../actions/setSpeechRecognitionReferenceGrammars';\n\nexport default function speechRecognitionReferenceGrammars(state = [], { payload, type }) {\n  if (type === SET_SPEECH_RECOGNITION_REFERENCE_GRAMMARS) {\n    return payload.referenceGrammars;\n  }\n\n  return state;\n}\n","import { ABORT_SPEECH_RECOGNITION } from '../actions/abortSpeechRecognition';\nimport { START_SPEECH_RECOGNITION } from '../actions/startSpeechRecognition';\nimport { STOP_SPEECH_RECOGNITION } from '../actions/stopSpeechRecognition';\n\nexport default function speechRecognitionStarted(state = false, { type }) {\n  switch (type) {\n    case ABORT_SPEECH_RECOGNITION:\n      return false;\n\n    case START_SPEECH_RECOGNITION:\n      return true;\n\n    case STOP_SPEECH_RECOGNITION:\n      return false;\n\n    default:\n      return state;\n  }\n}\n","import { SET_SPEECH_RECOGNITION_TEXT_NORMALIZATION } from '../actions/setSpeechRecognitionTextNormalization';\n\nexport default function speechRecognitionTextNormalization(state = 'display', { payload, type }) {\n  if (type === SET_SPEECH_RECOGNITION_TEXT_NORMALIZATION) {\n    state = payload.textNormalization;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_SERVICES_AUTHORIZATION_TOKEN } from '../actions/setSpeechServicesAuthorizationToken';\n\nexport default function speechServicesAuthorizationToken(state = '', { payload, type }) {\n  if (type === SET_SPEECH_SERVICES_AUTHORIZATION_TOKEN) {\n    return payload.authorizationToken;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_SERVICES_SUBSCRIPTION_KEY } from '../actions/setSpeechServicesSubscriptionKey';\n\nexport default function speechServicesSubscriptionKey(state = '', { payload, type }) {\n  if (type === SET_SPEECH_SERVICES_SUBSCRIPTION_KEY) {\n    state = payload.subscriptionKey;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_SYNTHESIS_DEPLOYMENT_ID } from '../actions/setSpeechSynthesisDeploymentId';\n\nexport default function speechSynthesisDeploymentId(state = '', { payload, type }) {\n  if (type === SET_SPEECH_SYNTHESIS_DEPLOYMENT_ID) {\n    state = payload.deploymentId;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_SYNTHESIS_NATIVE_VOICES } from '../actions/setSpeechSynthesisNativeVoices';\n\nexport default function speechSynthesisNativeVoices(state = [], { payload, type }) {\n  if (type === SET_SPEECH_SYNTHESIS_NATIVE_VOICES) {\n    return payload.voices;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_SYNTHESIS_OUTPUT_FORMAT } from '../actions/setSpeechSynthesisOutputFormat';\n\nexport default function speechSynthesisOutputFormat(state = 'audio-24khz-160kbitrate-mono-mp3', { payload, type }) {\n  if (type === SET_SPEECH_SYNTHESIS_OUTPUT_FORMAT) {\n    return payload.outputFormat;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_SYNTHESIS_TEXT } from '../actions/setSpeechSynthesisText';\n\nexport default function speechSynthesisText(state = '', { payload, type }) {\n  if (type === SET_SPEECH_SYNTHESIS_TEXT) {\n    return payload.text;\n  }\n\n  return state;\n}\n","import { SET_SPEECH_SYNTHESIS_VOICE_URI } from '../actions/setSpeechSynthesisVoiceURI';\n\nexport default function speechSynthesisVoiceURI(state = '', { payload, type }) {\n  if (type === SET_SPEECH_SYNTHESIS_VOICE_URI) {\n    return payload.voiceURI;\n  }\n\n  return state;\n}\n","import { call, put, select, takeLatest } from 'redux-saga/effects';\n\nimport { fetchAuthorizationToken as fetchSpeechServicesAuthorizationToken } from 'web-speech-cognitive-services/lib/SpeechServices';\n\nimport { CONVERT_SPEECH_SERVICES_SUBSCRIPTION_KEY_TO_AUTHORIZATION_TOKEN } from '../actions/convertSpeechServicesSubscriptionKeyToAuthorizationToken';\nimport setSpeechServicesAuthorizationToken from '../actions/setSpeechServicesAuthorizationToken';\n\nexport default function* convertSubscriptionKeyToAuthorizationTokenSaga() {\n  yield takeLatest(CONVERT_SPEECH_SERVICES_SUBSCRIPTION_KEY_TO_AUTHORIZATION_TOKEN, function* () {\n    try {\n      const { region, speechServicesSubscriptionKey } = yield select();\n      const authorizationToken = yield call(fetchSpeechServicesAuthorizationToken, {\n        region,\n        subscriptionKey: speechServicesSubscriptionKey\n      });\n\n      yield put(setSpeechServicesAuthorizationToken(authorizationToken));\n    } catch (err) {\n      console.error(err);\n    }\n  });\n}\n","export default async function({ region, subscriptionKey, tokenURL }) {\n  if (!subscriptionKey) {\n    throw new Error('web-speech-cognitive-services: \"subscriptionKey\" must be specified.');\n  } else if (!region && !tokenURL) {\n    throw new Error('web-speech-cognitive-services: Either \"region\" or \"tokenURL\" must be specified.');\n  } else if (region && tokenURL) {\n    throw new Error('web-speech-cognitive-services: Only either \"region\" or \"tokenURL\" can be specified.');\n  }\n\n  const res = await fetch(tokenURL || `https://${encodeURI(region)}.api.cognitive.microsoft.com/sts/v1.0/issueToken`, {\n    headers: {\n      'Ocp-Apim-Subscription-Key': subscriptionKey\n    },\n    method: 'POST'\n  });\n\n  if (!res.ok) {\n    throw new Error(`Failed to fetch authorization token, server returned ${res.status}`);\n  }\n\n  return res.text();\n}\n","import { put, select, takeLatest } from 'redux-saga/effects';\nimport createSpeechServicesPonyfill from 'web-speech-cognitive-services/lib/SpeechServices';\n\nimport { SET_ENABLE_TELEMETRY } from '../actions/setEnableTelemetry';\nimport { SET_ON_DEMAND_AUTHORIZATION_TOKEN } from '../actions/setOnDemandAuthorizationToken';\nimport { SET_PONYFILL_TYPE } from '../actions/setPonyfillType';\nimport { SET_REGION } from '../actions/setRegion';\nimport { SET_SPEECH_RECOGNITION_ENDPOINT_ID } from '../actions/setSpeechRecognitionEndpointId';\nimport { SET_SPEECH_RECOGNITION_REFERENCE_GRAMMARS } from '../actions/setSpeechRecognitionReferenceGrammars';\nimport { SET_SPEECH_RECOGNITION_TEXT_NORMALIZATION } from '../actions/setSpeechRecognitionTextNormalization';\nimport { SET_SPEECH_SERVICES_AUTHORIZATION_TOKEN } from '../actions/setSpeechServicesAuthorizationToken';\nimport { SET_SPEECH_SERVICES_SUBSCRIPTION_KEY } from '../actions/setSpeechServicesSubscriptionKey';\nimport { SET_SPEECH_SYNTHESIS_DEPLOYMENT_ID } from '../actions/setSpeechSynthesisDeploymentId';\nimport { SET_SPEECH_SYNTHESIS_OUTPUT_FORMAT } from '../actions/setSpeechSynthesisOutputFormat';\nimport fetchSpeechServicesAuthorizationToken from '../../fetchSpeechServicesAuthorizationToken';\nimport setPonyfill from '../actions/setPonyfill';\n\nfunction* setPonyfillSaga() {\n  const {\n    enableTelemetry,\n    onDemandAuthorizationToken,\n    ponyfillType,\n    region,\n    speechRecognitionEndpointId,\n    speechRecognitionReferenceGrammars: referenceGrammars,\n    speechRecognitionTextNormalization: textNormalization,\n    speechServicesAuthorizationToken,\n    speechServicesSubscriptionKey,\n    speechSynthesisDeploymentId,\n    speechSynthesisOutputFormat\n  } = yield select();\n\n  if (ponyfillType === 'browser') {\n    yield put(\n      setPonyfill({\n        SpeechGrammarList: window.SpeechGrammarList || window.webkitSpeechGrammarList,\n        SpeechRecognition: window.SpeechRecognition || window.webkitSpeechRecognition,\n        speechSynthesis: window.speechSynthesis,\n        SpeechSynthesisUtterance: window.SpeechSynthesisUtterance\n      })\n    );\n  } else {\n    if (!speechServicesAuthorizationToken && !speechServicesSubscriptionKey) {\n      return;\n    }\n\n    const options = {\n      enableTelemetry,\n      referenceGrammars,\n      region,\n      speechRecognitionEndpointId,\n      speechSynthesisDeploymentId,\n      speechSynthesisOutputFormat,\n      textNormalization\n    };\n\n    const createPonyfill =\n      ponyfillType === 'speechservices:bundle'\n        ? window.WebSpeechCognitiveServices.create\n        : createSpeechServicesPonyfill;\n\n    const ponyfill = createPonyfill(\n      speechServicesAuthorizationToken\n        ? {\n            ...options,\n            credentials: {\n              authorizationToken: speechServicesAuthorizationToken,\n              region\n            }\n          }\n        : {\n            ...options,\n            credentials: onDemandAuthorizationToken\n              ? async () => {\n                  /* eslint-disable-next-line no-console */\n                  console.log('On-demand fetching Speech Services authorization token');\n\n                  try {\n                    return {\n                      authorizationToken: await fetchSpeechServicesAuthorizationToken({\n                        region,\n                        subscriptionKey: speechServicesSubscriptionKey\n                      }),\n                      region\n                    };\n                  } catch (err) {\n                    console.error('Failed to fetch Speech Services authorization token', err);\n                  }\n                }\n              : {\n                  region,\n                  subscriptionKey: speechServicesSubscriptionKey\n                }\n          }\n    );\n\n    yield put(setPonyfill(ponyfill));\n  }\n}\n\nexport default function* setPonyfillRootSaga() {\n  yield* setPonyfillSaga();\n\n  yield takeLatest(\n    ({ type }) =>\n      type === SET_ENABLE_TELEMETRY ||\n      type === SET_PONYFILL_TYPE ||\n      type === SET_REGION ||\n      type === SET_SPEECH_RECOGNITION_REFERENCE_GRAMMARS ||\n      type === SET_SPEECH_RECOGNITION_ENDPOINT_ID ||\n      type === SET_SPEECH_RECOGNITION_TEXT_NORMALIZATION ||\n      type === SET_SPEECH_SERVICES_AUTHORIZATION_TOKEN ||\n      type === SET_SPEECH_SERVICES_SUBSCRIPTION_KEY ||\n      type === SET_SPEECH_SYNTHESIS_DEPLOYMENT_ID ||\n      type === SET_SPEECH_SYNTHESIS_OUTPUT_FORMAT ||\n      type === SET_ON_DEMAND_AUTHORIZATION_TOKEN,\n    setPonyfillSaga\n  );\n}\n","const SET_SPEECH_RECOGNITION_INSTANCE = 'SET_SPEECH_RECOGNITION_INSTANCE';\n\nexport default function setSpeechRecognitionInstance(speechRecognition) {\n  return {\n    type: SET_SPEECH_RECOGNITION_INSTANCE,\n    payload: { speechRecognition }\n  };\n}\n\nexport { SET_SPEECH_RECOGNITION_INSTANCE };\n","import createDeferred from 'p-defer-es5';\n\nexport default function () {\n  let shiftDeferred;\n  const queue = [];\n\n  const push = value => {\n    if (shiftDeferred) {\n      const { resolve } = shiftDeferred;\n\n      shiftDeferred = null;\n      resolve(value);\n    } else {\n      queue.push(value);\n    }\n  };\n\n  const shift = () => {\n    if (queue.length) {\n      return Promise.resolve(queue.shift());\n    }\n\n    return (shiftDeferred || (shiftDeferred = createDeferred())).promise;\n  };\n\n  return {\n    push,\n    shift\n  };\n}\n","import { call } from 'redux-saga/effects';\n\nexport default function* forever() {\n  /* eslint-disable-next-line no-empty-function */\n  yield call(() => new Promise(() => {}));\n}\n","import { call, fork, put, takeLatest } from 'redux-saga/effects';\n\nimport addSpeechRecognitionEvent from '../actions/addSpeechRecognitionEvent';\nimport { SET_SPEECH_RECOGNITION_INSTANCE } from '../actions/setSpeechRecognitionInstance';\n\nimport createPromiseQueue from '../utils/createPromiseQueue';\nimport forever from './effects/forever';\n\nconst MONITORING_EVENTS = [\n  'audiostart',\n  'soundstart',\n  'speechstart',\n  'speechend',\n  'soundend',\n  'audioend',\n  'result',\n  'nomatch',\n  'error',\n  'start',\n  'end',\n  'cognitiveservices'\n];\n\nexport default function* speechRecognitionSetInstanceSaga() {\n  const events = createPromiseQueue();\n\n  yield fork(function*() {\n    for (;;) {\n      const event = yield call(events.shift);\n\n      yield put(addSpeechRecognitionEvent(event));\n    }\n  });\n\n  yield takeLatest(SET_SPEECH_RECOGNITION_INSTANCE, function*({ payload: { speechRecognition } }) {\n    try {\n      MONITORING_EVENTS.forEach(name => speechRecognition.addEventListener(name, events.push));\n\n      yield forever();\n    } finally {\n      MONITORING_EVENTS.forEach(name => speechRecognition.removeEventListener(name, events.push));\n    }\n  });\n}\n","/* eslint no-magic-numbers: [\"error\", { \"ignore\": [2000] }] */\n\nimport { call, cancel, fork, join, put, race, select, take } from 'redux-saga/effects';\n\nimport addSpeechRecognitionEvent from '../actions/addSpeechRecognitionEvent';\nimport clearSpeechRecognitionEvent from '../actions/clearSpeechRecognitionEvent';\nimport getPonyfillCapabilities from '../../getPonyfillCapabilities';\n\nimport { ABORT_SPEECH_RECOGNITION } from '../actions/abortSpeechRecognition';\nimport { START_SPEECH_RECOGNITION } from '../actions/startSpeechRecognition';\nimport setSpeechRecognitionInstance from '../actions/setSpeechRecognitionInstance';\nimport stopSpeechRecognition, { STOP_SPEECH_RECOGNITION } from '../actions/stopSpeechRecognition';\n\nfunction sleep(duration) {\n  return new Promise(resolve => setTimeout(resolve, duration));\n}\n\nfunction* startSpeechRecognition({ getCancelReason }) {\n  let speechRecognition;\n\n  yield put(clearSpeechRecognitionEvent());\n  yield put(addSpeechRecognitionEvent({ type: 'ui:start' }));\n\n  try {\n    const {\n      ponyfill: { SpeechRecognition },\n      ponyfillType,\n      speechRecognitionContinuous: continuous,\n      speechRecognitionInterimResults: interimResults,\n      speechRecognitionLanguage: language,\n      speechRecognitionMaxAlternatives: maxAlternatives,\n      speechRecognitionPhrases: phrases\n    } = yield select();\n\n    speechRecognition = new SpeechRecognition();\n    speechRecognition.continuous = continuous;\n    speechRecognition.grammars.phrases = phrases;\n    speechRecognition.interimResults = interimResults;\n    speechRecognition.lang = language;\n\n    const ponyfillCapabilities = getPonyfillCapabilities(ponyfillType);\n\n    // TODO: Cognitive Services currently does not return multiple alternatives\n    if (ponyfillCapabilities.maxAlternatives) {\n      speechRecognition.maxAlternatives = maxAlternatives;\n    }\n\n    yield put(setSpeechRecognitionInstance(speechRecognition));\n\n    yield call(\n      () =>\n        new Promise(resolve => {\n          speechRecognition.addEventListener('error', resolve);\n          speechRecognition.addEventListener('end', resolve);\n          speechRecognition.start();\n        })\n    );\n  } finally {\n    if (speechRecognition) {\n      if (getCancelReason() === 'abort') {\n        speechRecognition.abort();\n      } else {\n        speechRecognition.stop();\n      }\n    }\n  }\n}\n\nexport default function* speechRecognitionStartSaga() {\n  for (;;) {\n    let cancelReason;\n\n    yield take(START_SPEECH_RECOGNITION);\n\n    const { speechRecognitionDelayedStart: delayedStart } = yield select();\n\n    if (delayedStart) {\n      yield call(sleep, 2000);\n    }\n\n    const task = yield fork(startSpeechRecognition, {\n      getCancelReason: () => cancelReason\n    });\n\n    const { abort, stop } = yield race({\n      abort: take(ABORT_SPEECH_RECOGNITION),\n      stop: take(STOP_SPEECH_RECOGNITION),\n      taskCompleted: join(task)\n    });\n\n    if (abort || stop) {\n      if (abort) {\n        yield put(addSpeechRecognitionEvent({ type: 'ui:abort' }));\n        cancelReason = 'abort';\n      } else if (stop) {\n        yield put(addSpeechRecognitionEvent({ type: 'ui:stop' }));\n        cancelReason = 'stop';\n      }\n\n      yield cancel(task);\n    } else {\n      yield put(stopSpeechRecognition());\n    }\n  }\n}\n","import { select, takeEvery } from 'redux-saga/effects';\n\nimport { CANCEL_SPEECH_SYNTHESIS } from '../actions/cancelSpeechSynthesis';\nimport { PAUSE_SPEECH_SYNTHESIS } from '../actions/pauseSpeechSynthesis';\nimport { RESUME_SPEECH_SYNTHESIS } from '../actions/resumeSpeechSynthesis';\n\nexport default function* speechSynthesisCancelPauseResumeSaga() {\n  yield takeEvery(CANCEL_SPEECH_SYNTHESIS, function*() {\n    const { ponyfill: { speechSynthesis } = {} } = yield select();\n\n    speechSynthesis && speechSynthesis.cancel();\n  });\n\n  yield takeEvery(PAUSE_SPEECH_SYNTHESIS, function*() {\n    const { ponyfill: { speechSynthesis } = {} } = yield select();\n\n    speechSynthesis && speechSynthesis.pause();\n  });\n\n  yield takeEvery(RESUME_SPEECH_SYNTHESIS, function*() {\n    const { ponyfill: { speechSynthesis } = {} } = yield select();\n\n    speechSynthesis && speechSynthesis.resume();\n  });\n}\n","import { call, put, takeEvery } from 'redux-saga/effects';\n\nimport { SET_PONYFILL } from '../actions/setPonyfill';\nimport setSpeechSynthesisNativeVoices from '../actions/setSpeechSynthesisNativeVoices';\n\nimport createPromiseQueue from '../utils/createPromiseQueue';\n\nexport default function* speechSynthesisSetNativeVoicesSaga() {\n  yield takeEvery(SET_PONYFILL, function*({ payload: { ponyfill: { speechSynthesis } = {} } }) {\n    if (!speechSynthesis) {\n      return;\n    }\n\n    const events = createPromiseQueue();\n\n    try {\n      speechSynthesis && speechSynthesis.addEventListener('voiceschanged', events.push);\n      events.push();\n\n      for (;;) {\n        yield call(events.shift);\n        yield put(setSpeechSynthesisNativeVoices(speechSynthesis.getVoices()));\n      }\n    } finally {\n      speechSynthesis && speechSynthesis.removeEventListener('voiceschanged', events.push);\n    }\n  });\n}\n","/* eslint no-magic-numbers: [\"error\", { \"ignore\": [1, 2, 36] }] */\n\nimport { put, select, takeEvery } from 'redux-saga/effects';\n\nimport { SPEECH_SYNTHESIS_SPEAK_UTTERANCE } from '../actions/speechSynthesisSpeakUtterance';\nimport addSpeechSynthesisNativeUtterance from '../actions/addSpeechSynthesisNativeUtterance';\n\nexport default function* speechSynthesisSpeakUtteranceSaga() {\n  yield takeEvery(SPEECH_SYNTHESIS_SPEAK_UTTERANCE, function*({ payload: { utterance } }) {\n    const { text, voiceURI } = utterance;\n\n    const {\n      ponyfill: { speechSynthesis, SpeechSynthesisUtterance },\n      speechSynthesisNativeVoices\n    } = yield select();\n\n    const nativeUtterance = new SpeechSynthesisUtterance(text);\n\n    nativeUtterance.id = Math.random()\n      .toString(36)\n      .substr(2);\n\n    const nativeVoice = speechSynthesisNativeVoices.find(voice => voice.voiceURI === voiceURI);\n\n    if (nativeVoice) {\n      nativeUtterance.voice = nativeVoice;\n    } else {\n      nativeUtterance.voice = { voiceURI };\n    }\n\n    yield put(addSpeechSynthesisNativeUtterance(nativeUtterance));\n\n    speechSynthesis.speak(nativeUtterance);\n  });\n}\n","import { call, put, race, take, takeEvery } from 'redux-saga/effects';\n\nimport addSpeechSynthesisNativeUtteranceEvent from '../actions/addSpeechSynthesisNativeUtteranceEvent';\nimport { ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE } from '../actions/addSpeechSynthesisNativeUtterance';\nimport { CLEAR_SPEECH_SYNTHESIS_UTTERANCE } from '../actions/clearSpeechSynthesisUtterance';\n\nimport createPromiseQueue from '../utils/createPromiseQueue';\n\nconst MONITORING_EVENTS = ['boundary', 'end', 'error', 'mark', 'pause', 'resume', 'start'];\n\nexport default function* speechSynthesisUtteranceEventSaga() {\n  yield takeEvery(ADD_SPEECH_SYNTHESIS_NATIVE_UTTERANCE, function*({ payload: { nativeUtterance } }) {\n    const events = createPromiseQueue();\n\n    try {\n      MONITORING_EVENTS.forEach(name => nativeUtterance.addEventListener(name, events.push));\n\n      for (;;) {\n        const { clear, event } = yield race({\n          clear: take(CLEAR_SPEECH_SYNTHESIS_UTTERANCE),\n          event: call(events.shift)\n        });\n\n        if (clear) {\n          break;\n        } else if (event) {\n          yield put(addSpeechSynthesisNativeUtteranceEvent(nativeUtterance.id, event));\n\n          if (event.type === 'end' || event.type === 'error') {\n            break;\n          }\n        }\n      }\n    } finally {\n      MONITORING_EVENTS.forEach(name => nativeUtterance.removeEventListener(name, events.push));\n    }\n  });\n}\n","import { fork } from 'redux-saga/effects';\n\nimport convertSubscriptionKeyToAuthorizationToken from './sagas/convertSubscriptionKeyToAuthorizationToken';\nimport setPonyfill from './sagas/setPonyfill';\nimport speechRecognitionSetInstance from './sagas/speechRecognitionSetInstance';\nimport speechRecognitionStart from './sagas/speechRecognitionStart';\nimport speechSynthesisCancelPauseResume from './sagas/speechSynthesisCancelPauseResume';\nimport speechSynthesisSetNativeVoices from './sagas/speechSynthesisSetNativeVoices';\nimport speechSynthesisSpeakUtterance from './sagas/speechSynthesisSpeakUtterance';\nimport speechSynthesisUtteranceEvent from './sagas/speechSynthesisUtteranceEvent';\n\nexport default function* saga() {\n  yield fork(convertSubscriptionKeyToAuthorizationToken);\n  yield fork(setPonyfill);\n  yield fork(speechRecognitionSetInstance);\n  yield fork(speechRecognitionStart);\n  yield fork(speechSynthesisCancelPauseResume);\n  yield fork(speechSynthesisSetNativeVoices);\n  yield fork(speechSynthesisSpeakUtterance);\n  yield fork(speechSynthesisUtteranceEvent);\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport createStore from './data/createStore';\nimport registerServiceWorker from './registerServiceWorker';\n\nconst store = createStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\nregisterServiceWorker();\n","import { applyMiddleware, createStore } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport onErrorResumeNext from 'on-error-resume-next';\n\nimport reducer from './reducer';\nimport saga from './saga';\n\nfunction loadState() {\n  const state = onErrorResumeNext(() => JSON.parse(window.sessionStorage.getItem('REDUX_STORE'))) || {};\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  const speechServicesSubscriptionKeyFromURL = urlSearchParams.get('ss');\n  const regionFromURL = urlSearchParams.get('r');\n\n  if (speechServicesSubscriptionKeyFromURL) {\n    state.speechServicesSubscriptionKey = speechServicesSubscriptionKeyFromURL;\n  }\n\n  if (regionFromURL) {\n    state.region = regionFromURL;\n  }\n\n  return state;\n}\n\nexport default function createPlaygroundStore() {\n  const initialState = loadState();\n  const sagaMiddleware = createSagaMiddleware();\n  const store = createStore(\n    reducer,\n    initialState,\n    applyMiddleware(\n      sagaMiddleware\n      // () => next => action => {\n      //   console.log(action);\n\n      //   return next(action);\n      // }\n    )\n  );\n\n  sagaMiddleware.run(saga);\n\n  store.subscribe(() => {\n    const state = store.getState();\n\n    // Remove keys that should not be serialized\n    const {\n      authorizationToken: _authorizationToken,\n      ponyfill: _ponyfill,\n      speechRecognitionStarted: _speechRecognitionStarted,\n      speechServicesAuthorizationToken: _speechServicesAuthorizationToken,\n      speechSynthesisNativeVoices: _speechSynthesisNativeVoices,\n      ...serializableState\n    } = state;\n\n    window.sessionStorage.setItem('REDUX_STORE', JSON.stringify(serializableState));\n  });\n\n  return store;\n}\n","/* global process */\n\nimport createSpeechRecognitionPonyfill, {\n  createSpeechRecognitionPonyfillFromRecognizer\n} from './SpeechServices/SpeechToText';\nimport createSpeechSynthesisPonyfill from './SpeechServices/TextToSpeech';\nimport fetchAuthorizationToken from './SpeechServices/fetchAuthorizationToken';\n\nexport default function createSpeechServicesPonyfill(options = {}, ...args) {\n  const ponyfill = {\n    ...createSpeechRecognitionPonyfill(options, ...args),\n    ...createSpeechSynthesisPonyfill(options, ...args)\n  };\n\n  return {\n    ...ponyfill,\n    then: resolve => {\n      console.warn(\n        'web-speech-cognitive-services: This function no longer need to be called in an asynchronous fashion. Please update your code. We will remove this Promise.then function on or after 2020-08-10.'\n      );\n\n      resolve(ponyfill);\n    }\n  };\n}\n\nexport {\n  createSpeechRecognitionPonyfill,\n  createSpeechRecognitionPonyfillFromRecognizer,\n  createSpeechSynthesisPonyfill,\n  fetchAuthorizationToken\n}\n\nconst meta = document.createElement('meta');\n\nmeta.setAttribute('name', 'web-speech-cognitive-services');\nmeta.setAttribute('content', `version=${ process.env.npm_package_version }`);\n\ndocument.head.appendChild(meta);\n"],"sourceRoot":""}